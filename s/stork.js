var stork=function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";var r,s=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.name="StorkError",n}return s(t,e),t}(Error);t.default=i},function(e,t,n){"use strict";function r(e){const t=n.p;let r="";return(!t||t.indexOf("://")<0)&&(r+=window.location.protocol+"//"+window.location.host),r+=t||"/",r+e}let s;n.r(t),n.d(t,"wasm_register_index",(function(){return _})),n.d(t,"wasm_search",(function(){return w})),n.d(t,"wasm_stork_version",(function(){return b}));const i=new Array(32).fill(void 0);function o(e){return i[e]}i.push(void 0,null,!0,!1);let a=i.length;function l(e){const t=o(e);return function(e){e<36||(i[e]=a,a=e)}(e),t}let u=0,c=null;function d(){return null!==c&&c.buffer===s.memory.buffer||(c=new Uint8Array(s.memory.buffer)),c}let h=new TextEncoder("utf-8");const f="function"==typeof h.encodeInto?function(e,t){return h.encodeInto(e,t)}:function(e,t){const n=h.encode(e);return t.set(n),{read:e.length,written:n.length}};function g(e,t,n){if(void 0===n){const n=h.encode(e),r=t(n.length);return d().subarray(r,r+n.length).set(n),u=n.length,r}let r=e.length,s=t(r);const i=d();let o=0;for(;o<r;o++){const t=e.charCodeAt(o);if(t>127)break;i[s+o]=t}if(o!==r){0!==o&&(e=e.slice(o)),s=n(s,r,r=o+3*e.length);const t=d().subarray(s+o,s+r);o+=f(e,t).written}return u=o,s}let p=null;function m(){return null!==p&&p.buffer===s.memory.buffer||(p=new Int32Array(s.memory.buffer)),p}let y=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});function v(e,t){return y.decode(d().subarray(e,e+t))}function _(e,t){try{const c=s.__wbindgen_add_to_stack_pointer(-16);var n=g(e,s.__wbindgen_malloc,s.__wbindgen_realloc),r=u,i=function(e,t){const n=t(1*e.length);return d().set(e,n/1),u=e.length,n}(t,s.__wbindgen_malloc),o=u;s.wasm_register_index(c,n,r,i,o);var a=m()[c/4+0],l=m()[c/4+1];return v(a,l)}finally{s.__wbindgen_add_to_stack_pointer(16),s.__wbindgen_free(a,l)}}function w(e,t){try{const c=s.__wbindgen_add_to_stack_pointer(-16);var n=g(e,s.__wbindgen_malloc,s.__wbindgen_realloc),r=u,i=g(t,s.__wbindgen_malloc,s.__wbindgen_realloc),o=u;s.wasm_search(c,n,r,i,o);var a=m()[c/4+0],l=m()[c/4+1];return v(a,l)}finally{s.__wbindgen_add_to_stack_pointer(16),s.__wbindgen_free(a,l)}}function b(){try{const n=s.__wbindgen_add_to_stack_pointer(-16);s.wasm_stork_version(n);var e=m()[n/4+0],t=m()[n/4+1];return v(e,t)}finally{s.__wbindgen_add_to_stack_pointer(16),s.__wbindgen_free(e,t)}}y.decode(),t.default=async function e(t){void 0===t&&(t=r("node_modules/stork-search/stork.js").replace(/\.js$/,"_bg.wasm"));const n={wbg:{}};n.wbg.__wbg_new_59cb74e423758ede=function(){return function(e){a===i.length&&i.push(i.length+1);const t=a;return a=i[t],i[t]=e,t}(new Error)},n.wbg.__wbg_stack_558ba5917b466edd=function(e,t){var n=g(o(t).stack,s.__wbindgen_malloc,s.__wbindgen_realloc),r=u;m()[e/4+1]=r,m()[e/4+0]=n},n.wbg.__wbg_error_4bb6c2a97407129a=function(e,t){try{console.error(v(e,t))}finally{s.__wbindgen_free(e,t)}},n.wbg.__wbindgen_object_drop_ref=function(e){l(e)},("string"==typeof t||"function"==typeof Request&&t instanceof Request||"function"==typeof URL&&t instanceof URL)&&(t=fetch(t));const{instance:c,module:d}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"==e.headers.get("Content-Type"))throw t;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t)}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}(await t,n);return s=c.exports,e.__wbindgen_wasm_module=d,s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),s=n(0);t.resolveSearch=function(e,t){var n=null,i=null;try{n=r.wasm_search(e,t),i=JSON.parse(n)}catch(e){throw new s.default("Could not parse data from wasm_search. If you see this, please file a bug: https://jil.im/storkbug "+n)}if(!i)throw new s.default("Data was an empty object");if(i.error)throw new s.default("Could not perform search: the WASM binary failed to return search results.\n    You might not be serving your search index properly.\n    If you think this is an error, please file a bug: https://jil.im/storkbug\n    \n    The WASM binary came back with:\n    "+i.error);return i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),s=n(13),i=n(14),o=n(2),a=n(0),l=n(15),u=n(1),c=null,d=new s.default,h=new r.EntityManager(d);function f(e){return void 0===e&&(e=null),i.loadWasm(e).then((function(e){d.flush(),c=e})).catch((function(e){throw new a.default(e)}))}function g(e,t,n){return void 0===n&&(n={}),new Promise((function(r,s){var i=l.validateIndexParams(e,t);i?s(i):h.register(e,t,n).then(r).catch(s)}))}function p(e){try{h.attachToDom(e)}catch(e){throw new a.default(e.message)}}t.initialize=f,t.downloadIndex=g,t.attach=p,t.register=function(e,t,n){var r=f(),s=g(e,t,n);return p(e),Promise.all([r,s]).then()},t.search=function(e,t){var n;if(!e||!t)throw new a.default("Make sure to call stork.search() with two arguments: the index name and the search query.");if("ready"!=(null===(n=h.entities[e])||void 0===n?void 0:n.state))throw new a.default("Couldn't find index. Make sure the stork.downloadIndex() promise has resolved before calling stork.search().");return o.resolveSearch(e,t)},t.debug=function(){return{wasmQueueMethods:d.queue.length,loadedWasmUrl:c,indexes:h.entities,indexCount:Object.keys(h.entities).length,jsStorkVersion:"1.2.0",wasmStorkVersion:u.wasm_stork_version()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),s=n(10),i=n(12),o=n(0),a=function(){function e(e){this.entities={},this.wasmQueue=e}return e.prototype.register=function(e,t,n){var a=this;return new Promise((function(l,u){var c=s.calculateOverriddenConfig(n);if(c instanceof o.default)u(c);else{if(a.entities[e]&&!c.forceOverwrite)throw new o.default("You're registering an index named `"+e+"`, but that already exists. If this is expected, set forceOverwrite to true in your Javascript config to allow overwriting indexes.");var d=new r.Entity(e,t,c);a.entities[e]=d,i.loadIndexFromUrl(t,{progress:function(e){d.setDownloadProgress(e)},load:function(e){a.wasmQueue.runAfterWasmLoaded((function(){d.registerIndex(new Uint8Array(e)).then(l).catch(u)}))},error:function(){d.setDownloadError(),u()}})}}))},e.prototype.attachToDom=function(e){if(!this.entities[e])throw new Error("Index "+e+" has not been registered!");this.entities[e].attachToDom()},e}();t.EntityManager=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(6),i=n(1),o=n(0),a=function(){function e(e,t,n){var r=this;this._state="initialized",this.downloadProgress=0,this.results=[],this.totalResultCount=0,this.eventListenerFunctions={},this.highlightedResult=0,this.resultsVisible=!1,this.hoverSelectEnabled=!0,this.setDownloadProgress=function(e){r.state="loading",r.downloadProgress=e,r.config.showProgress&&r.render()},this.name=e,this.url=t,this.config=n}return Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(e){this._state=e,this.render()},enumerable:!0,configurable:!0}),e.prototype.getCurrentMessage=function(){if(!this.domManager)return null;var e=this.domManager.getQuery();return"error"===this.state?"Error! Check the browser console.":"ready"!=this.state?"Loading...":(null==e?void 0:e.length)<this.config.minimumQueryLength?"Filtering...":this.results?0===this.totalResultCount?"No files found.":1===this.totalResultCount?"1 file found.":this.totalResultCount+" files found.":null},e.prototype.generateRenderConfig=function(){return{results:this.results,resultsVisible:!0,showScores:this.config.showScores,message:this.getCurrentMessage(),showProgress:this.config.showProgress,progress:this.downloadProgress,state:this.state}},e.prototype.render=function(){this.domManager&&this.domManager.render(this.generateRenderConfig())},e.prototype.registerIndex=function(e){var t=this;return new Promise((function(n,r){var s=JSON.parse(i.wasm_register_index(t.name,e));s.error?r(new o.default(s.error)):(t.config.printIndexInfo&&console.log(s),t.state="ready",n(s))}))},e.prototype.attachToDom=function(){this.domManager=new s.EntityDom(this.name,this),this.render()},e.prototype.injestSearchData=function(e){this.results=e.results,this.totalResultCount=e.total_hit_count,this.highlightedResult=0;var t=e.url_prefix||"";this.results.map((function(e){var n="";e.excerpts&&e.excerpts[0]&&e.excerpts[0].internal_annotations&&e.excerpts[0].internal_annotations[0]&&e.excerpts[0].internal_annotations[0].a&&"string"==typeof e.excerpts[0].internal_annotations[0].a&&(n=e.excerpts[0].internal_annotations[0].a),e.entry.url=""+t+e.entry.url+n})),this.render()},e.prototype.getSanitizedResults=function(){var e=this.results;return e.map((function(e){delete e.title_highlight_ranges,e.excerpts.map((function(e){delete e.highlight_ranges,delete e.internal_annotations}))})),e},e.prototype.setDownloadError=function(){this.state="error"},e.prototype.performSearch=function(e){if("ready"===this.state){if(e.length<=this.config.minimumQueryLength)return this.results=[],void this.render();try{var t=r.resolveSearch(this.name,e);if(!t)return;this.injestSearchData(t),this.config.onQueryUpdate&&this.config.onQueryUpdate(e,this.getSanitizedResults())}catch(e){console.error(e)}}else this.render()},e}();t.Entity=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),s=n(8),i={results:[],resultsVisible:!1,showScores:!1,message:null,showProgress:!1,progress:1,state:"ready"},o=function(){function e(e,t){var n,s,o=this;this.scrollAnchorPoint="end",this.entity=t;var a=[{selector:'input[data-stork="'+e+'"]',elementName:"input"},{selector:'div[data-stork="'+e+'-output"]',elementName:"output"}].map((function(t){var n=document.querySelector(t.selector);if(!n)throw new Error('Could not register search box "'+e+'": '+t.elementName+" element not found. Make sure an element matches the query selector `"+t.selector+"`");return n})),l=a[0],u=a[1];this.elements={input:l,output:u,list:r.create("ul",{classNames:["stork-results"]}),attribution:r.create("div",{classNames:["stork-attribution"]}),progress:r.create("div",{classNames:["stork-progress"]}),message:r.create("div",{classNames:["stork-message"]}),closeButton:r.create("button",{classNames:["stork-close-button"]})},this.elements.input.removeEventListener("input",this.entity.eventListenerFunctions.inputInputEvent),this.elements.input.removeEventListener("keydown",this.entity.eventListenerFunctions.inputKeydownEvent),this.entity.eventListenerFunctions={inputInputEvent:function(e){o.handleInputEvent(e)},inputKeydownEvent:function(e){o.handleKeyDownEvent(e)}},this.elements.input.addEventListener("input",this.entity.eventListenerFunctions.inputInputEvent),this.elements.input.addEventListener("keydown",this.entity.eventListenerFunctions.inputKeydownEvent),null===(n=this.elements.list)||void 0===n||n.addEventListener("mousemove",(function(){o.hoverSelectEnabled=!0})),this.elements.attribution.innerHTML='Powered by <a href="https://stork-search.net">Stork</a>',r.setText(this.elements.closeButton,"Ã—"),this.entity.config.showProgress&&r.add(this.elements.progress,"afterend",this.elements.input),null===(s=this.elements.closeButton)||void 0===s||s.addEventListener("click",(function(){o.elements.input.value="",o.elements.input.focus(),o.render(i);var e=[o.entity.config.onInputCleared,o.entity.config.onResultsHidden],t=e[0],n=e[1];t&&t(),n&&n()}))}return e.prototype.clearDom=function(){var e;r.clear(this.elements.output),r.clear(this.elements.list),null===(e=this.elements.closeButton)||void 0===e||e.remove(),this.elements.output.classList.remove("stork-output-visible")},e.prototype.render=function(e){var t,n=this,i=this.elements.input.value;if(this.clearDom(),this.lastRenderState=e,e.showProgress){var o=function(){switch(e.state){case"ready":case"error":return 1;case"initialized":case"loading":return.9*e.progress+.05}}();o<1?(this.elements.progress.style.width=100*o+"%",this.elements.progress.style.opacity="1"):(this.elements.progress.style.width="100%",this.elements.progress.style.opacity="0")}if("error"===e.state&&this.elements.input.classList.add("stork-error"),this.getQuery().length>0&&e.resultsVisible&&(this.elements.output.classList.add("stork-output-visible"),r.add(this.elements.message,"beforeend",this.elements.output)),e.message&&r.setText(this.elements.message,e.message),(null===(t=e.results)||void 0===t?void 0:t.length)>0&&e.resultsVisible){r.add(this.elements.list,"beforeend",this.elements.output);for(var a=function(t){var i=e.results[t],o={selected:t===l.highlightedResult,showScores:e.showScores},a=s.resultToListItem(i,o);r.add(a,"beforeend",l.elements.list),a.addEventListener("mousemove",(function(){n.hoverSelectEnabled&&t!==n.highlightedResult&&n.changeHighlightedResult({to:t,shouldScrollTo:!1})})),a.addEventListener("click",(function(e){e.preventDefault(),n.selectResult()}))},l=this,u=0;u<e.results.length;u++)a(u);r.add(this.elements.attribution,"beforeend",this.elements.output)}((null==i?void 0:i.length)||0)>0&&this.entity.config.showCloseButton&&r.add(this.elements.closeButton,"afterend",this.elements.input)},e.prototype.selectResult=function(){if(null!=this.highlightedResult){var e=this.entity.results[this.highlightedResult];this.entity.config.onResultSelected?Promise.resolve(this.entity.config.onResultSelected(this.getQuery(),e)).finally((function(){window.location.assign(e.entry.url)})):window.location.assign(e.entry.url)}},e.prototype.changeHighlightedResult=function(e){var t,n=this.highlightedResult,s=Math.max(0,Math.min(this.entity.results.length-1,e.to));this.highlightedResult=s,this.scrollAnchorPoint=(n||0)<s?"end":"start";for(var i=null,o=0;o<this.entity.results.length;o++){var a=null===(t=this.elements.list)||void 0===t?void 0:t.children[o];if(a){o==s?(a.classList.add("selected"),i=a):a.classList.remove("selected")}}return e.shouldScrollTo&&(this.hoverSelectEnabled=!1,i&&r.existsBeyondContainerBounds(i,this.elements.list)&&i.scrollIntoView({behavior:"smooth",block:this.scrollAnchorPoint,inline:"nearest"})),s},e.prototype.handleKeyDownEvent=function(e){switch(e.keyCode){case 40:if(null==this.highlightedResult)this.changeHighlightedResult({to:0,shouldScrollTo:!0});else{var t=Math.min(this.highlightedResult+1,this.entity.results.length-1);this.changeHighlightedResult({to:t,shouldScrollTo:!0})}break;case 38:if(null!=this.highlightedResult){t=Math.max(0,this.highlightedResult-1);this.changeHighlightedResult({to:t,shouldScrollTo:!0})}break;case 13:this.selectResult();break;case 27:if(this.lastRenderState.resultsVisible)this.render(i),(n=this.entity.config.onResultsHidden)&&n();else if(this.elements.input.value.length>0){var n;this.elements.input.value="",this.render(i),(n=this.entity.config.onInputCleared)&&n()}break;default:return}},e.prototype.handleInputEvent=function(e){this.entity.performSearch(e.target.value)},e.prototype.getQuery=function(){return this.elements.input.value},e}();t.EntityDom=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.create=function(e,t){var n=document.createElement(e);return t.classNames&&n.setAttribute("class",t.classNames.join(" ")),n},t.add=function(e,t,n){n.insertAdjacentElement(t,e)},t.clear=function(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)},t.setText=function(e,t){var n=document.createTextNode(t);e&&e.firstChild?e.replaceChild(n,e.firstChild):e&&e.appendChild(n)},t.existsBeyondContainerBounds=function(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return n.bottom>r.bottom||n.top<r.top}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9);t.resultToListItem=function(e,t){var n=document.createElement("template");return n.innerHTML='\n<li class="stork-result'+(t.selected?" selected":"")+'">\n  <a href="'+e.entry.url+'">\n    <div style="display: flex; justify-content: space-between">\n      <p class="stork-title">'+r.highlight(e.entry.title,e.title_highlight_ranges||[])+"</p>\n      "+(t.showScores?"<code><b>"+e.score+"</b></code>":"")+"\n    </div>\n      "+e.excerpts.map((function(e){return'<div style="display: flex; justify-content: space-between"><p class="stork-excerpt">\n        ...'+r.highlight(e.text,e.highlight_ranges||[])+"...\n        </p>\n        "+(t.showScores?"<code>"+e.score+"</code>":"")+"\n        </div>"})).join("")+"\n  </a>\n</li>",n.content.firstElementChild}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.highlight=function(e,t){function n(e,t,n){return e.substr(0,t)+n+e.substr(t)}for(var r=0,s=0,i=t;s<i.length;s++){var o=i[s];e=n(e,o.beginning+r,'<mark class="stork-highlight">'),r+='<mark class="stork-highlight">'.length,e=n(e,o.end+r,"</mark>"),r+="</mark>".length}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(11);t.defaultConfig={showProgress:!0,printIndexInfo:!1,showScores:!1,showCloseButton:!0,minimumQueryLength:3,forceOverwrite:!1,onQueryUpdate:void 0,onResultSelected:void 0,onResultsHidden:void 0,onInputCleared:void 0},t.calculateOverriddenConfig=function(e){var n=s.difference(Object.keys(e),Object.keys(t.defaultConfig));if(n.length>0){var i=s.plural(n.length,"key","keys"),o=JSON.stringify(n);return new r.default("Invalid "+i+" in config object: "+o)}for(var a=Object.assign({},t.defaultConfig),l=0,u=Object.keys(t.defaultConfig);l<u.length;l++){var c=u[l],d=e[c];void 0!==d&&(a[c]=d)}return a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.htmlToElement=function(e){var t=document.createElement("template");return e=e.trim(),t.innerHTML=e,t.content.firstChild},t.difference=function(e,t){var n=new Set(e),r=new Set(t),s=new Set(Array.from(n).filter((function(e){return!r.has(e)})));return Array.from(s)},t.plural=function(e,t,n){return 1==e?t:n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadIndexFromUrl=function(e,t){var n=new XMLHttpRequest;n.addEventListener("load",(function(e){var n=e.target,r=n.status,s=n.response;0!==r?r<200||r>299?t.error():t.load(s):t.progress(e.loaded/e.total)})),n.addEventListener("error",(function(){t.error()})),n.addEventListener("progress",(function(e){t.progress(e.loaded/e.total)})),n.responseType="arraybuffer",n.open("GET",e),n.send()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.queue=[],this.flushes=0}return e.prototype.runAfterWasmLoaded=function(e){return this.flushes>0?e():this.queue.push(e),this},e.prototype.flush=function(){this.flushes++;for(var e=0,t=this.queue;e<t.length;e++){(0,t[e])()}this.queue=[]},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);t.loadWasm=function(e){var t=e||"https://files.stork-search.net/stork.wasm";return r.default(t).then((function(){return t}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.validateIndexParams=function(e,t){return"string"!=typeof e?new r.default("Index registration name must be a string."):"string"!=typeof t?new r.default("URL must be a string."):null}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdG9yay93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9zdG9yay8uL2pzL3N0b3JrRXJyb3IudHMiLCJ3ZWJwYWNrOi8vc3RvcmsvLi9ub2RlX21vZHVsZXMvc3Rvcmstc2VhcmNoL3N0b3JrLmpzIiwid2VicGFjazovL3N0b3JrLy4vanMvc2VhcmNoRGF0YS50cyIsIndlYnBhY2s6Ly9zdG9yay8uL2pzL21haW4udHMiLCJ3ZWJwYWNrOi8vc3RvcmsvLi9qcy9lbnRpdHlNYW5hZ2VyLnRzIiwid2VicGFjazovL3N0b3JrLy4vanMvZW50aXR5LnRzIiwid2VicGFjazovL3N0b3JrLy4vanMvZW50aXR5RG9tLnRzIiwid2VicGFjazovL3N0b3JrLy4vanMvZG9tLnRzIiwid2VicGFjazovL3N0b3JrLy4vanMvcmVzdWx0VG9MaXN0SXRlbS50cyIsIndlYnBhY2s6Ly9zdG9yay8uL2pzL3BlbmNpbC50cyIsIndlYnBhY2s6Ly9zdG9yay8uL2pzL2NvbmZpZy50cyIsIndlYnBhY2s6Ly9zdG9yay8uL2pzL3V0aWwudHMiLCJ3ZWJwYWNrOi8vc3RvcmsvLi9qcy9sb2FkZXJzL2luZGV4TG9hZGVyLnRzIiwid2VicGFjazovL3N0b3JrLy4vanMvd2FzbVF1ZXVlLnRzIiwid2VicGFjazovL3N0b3JrLy4vanMvbG9hZGVycy93YXNtTG9hZGVyLnRzIiwid2VicGFjazovL3N0b3JrLy4vanMvdmFsaWRhdG9ycy9pbmRleFBhcmFtVmFsaWRhdG9yLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwibWVzc2FnZSIsIkVycm9yIiwiU3RvcmtFcnJvciIsImdldEFic29sdXRlVXJsIiwicmVsYXRpdmVVcmwiLCJwdWJsaWNQYXRoIiwidXJsIiwiaW5kZXhPZiIsIndpbmRvdyIsImxvY2F0aW9uIiwicHJvdG9jb2wiLCJob3N0Iiwid2FzbSIsImhlYXAiLCJBcnJheSIsImZpbGwiLCJ1bmRlZmluZWQiLCJnZXRPYmplY3QiLCJpZHgiLCJwdXNoIiwiaGVhcF9uZXh0IiwibGVuZ3RoIiwidGFrZU9iamVjdCIsInJldCIsImRyb3BPYmplY3QiLCJXQVNNX1ZFQ1RPUl9MRU4iLCJjYWNoZWdldFVpbnQ4TWVtb3J5MCIsImdldFVpbnQ4TWVtb3J5MCIsImJ1ZmZlciIsIm1lbW9yeSIsIlVpbnQ4QXJyYXkiLCJjYWNoZWRUZXh0RW5jb2RlciIsIlRleHRFbmNvZGVyIiwiZW5jb2RlU3RyaW5nIiwiZW5jb2RlSW50byIsImFyZyIsInZpZXciLCJidWYiLCJlbmNvZGUiLCJzZXQiLCJyZWFkIiwid3JpdHRlbiIsInBhc3NTdHJpbmdUb1dhc20wIiwibWFsbG9jIiwicmVhbGxvYyIsInB0ciIsInN1YmFycmF5IiwibGVuIiwibWVtIiwib2Zmc2V0IiwiY29kZSIsImNoYXJDb2RlQXQiLCJzbGljZSIsImNhY2hlZ2V0SW50MzJNZW1vcnkwIiwiZ2V0SW50MzJNZW1vcnkwIiwiSW50MzJBcnJheSIsImNhY2hlZFRleHREZWNvZGVyIiwiVGV4dERlY29kZXIiLCJpZ25vcmVCT00iLCJmYXRhbCIsImdldFN0cmluZ0Zyb21XYXNtMCIsImRlY29kZSIsIndhc21fcmVnaXN0ZXJfaW5kZXgiLCJkYXRhIiwicmV0cHRyIiwiX193YmluZGdlbl9hZGRfdG9fc3RhY2tfcG9pbnRlciIsInB0cjAiLCJfX3diaW5kZ2VuX21hbGxvYyIsIl9fd2JpbmRnZW5fcmVhbGxvYyIsImxlbjAiLCJwdHIxIiwicGFzc0FycmF5OFRvV2FzbTAiLCJsZW4xIiwicjAiLCJyMSIsIl9fd2JpbmRnZW5fZnJlZSIsIndhc21fc2VhcmNoIiwicXVlcnkiLCJ3YXNtX3N0b3JrX3ZlcnNpb24iLCJhc3luYyIsImluaXQiLCJpbnB1dCIsInJlcGxhY2UiLCJpbXBvcnRzIiwid2JnIiwiX193YmdfbmV3XzU5Y2I3NGU0MjM3NThlZGUiLCJvYmoiLCJhZGRIZWFwT2JqZWN0IiwiX193Ymdfc3RhY2tfNTU4YmE1OTE3YjQ2NmVkZCIsImFyZzAiLCJhcmcxIiwic3RhY2siLCJfX3diZ19lcnJvcl80YmI2YzJhOTc0MDcxMjlhIiwiY29uc29sZSIsImVycm9yIiwiX193YmluZGdlbl9vYmplY3RfZHJvcF9yZWYiLCJSZXF1ZXN0IiwiVVJMIiwiZmV0Y2giLCJpbnN0YW5jZSIsIlJlc3BvbnNlIiwiV2ViQXNzZW1ibHkiLCJpbnN0YW50aWF0ZVN0cmVhbWluZyIsImUiLCJoZWFkZXJzIiwid2FybiIsImJ5dGVzIiwiYXJyYXlCdWZmZXIiLCJpbnN0YW50aWF0ZSIsIkluc3RhbmNlIiwibG9hZCIsIl9fd2JpbmRnZW5fd2FzbV9tb2R1bGUiLCJzZWFyY2hPdXRwdXQiLCJKU09OIiwicGFyc2UiLCJsb2FkZWRXYXNtVXJsIiwid2FzbVF1ZXVlIiwiZW50aXR5TWFuYWdlciIsIkVudGl0eU1hbmFnZXIiLCJpbml0aWFsaXplIiwid2FzbU92ZXJyaWRlVXJsIiwibG9hZFdhc20iLCJ0aGVuIiwiZnJvbVVybCIsImZsdXNoIiwiY2F0Y2giLCJkb3dubG9hZEluZGV4IiwiY29uZmlnIiwiUHJvbWlzZSIsInJlcyIsInJlaiIsInZhbGlkYXRpb25FcnJvciIsInZhbGlkYXRlSW5kZXhQYXJhbXMiLCJyZWdpc3RlciIsImF0dGFjaCIsImF0dGFjaFRvRG9tIiwiaW5pdFByb21pc2UiLCJkb253bG9hZFByb21pc2UiLCJhbGwiLCJzZWFyY2giLCJlbnRpdGllcyIsInN0YXRlIiwicmVzb2x2ZVNlYXJjaCIsImRlYnVnIiwid2FzbVF1ZXVlTWV0aG9kcyIsInF1ZXVlIiwiaW5kZXhlcyIsImluZGV4Q291bnQiLCJrZXlzIiwianNTdG9ya1ZlcnNpb24iLCJ3YXNtU3RvcmtWZXJzaW9uIiwidGhpcyIsInBhcnRpYWxDb25maWciLCJmdWxsQ29uZmlnIiwiY2FsY3VsYXRlT3ZlcnJpZGRlbkNvbmZpZyIsImZvcmNlT3ZlcndyaXRlIiwiZW50aXR5IiwiRW50aXR5IiwibG9hZEluZGV4RnJvbVVybCIsInByb2dyZXNzIiwicGVyY2VudGFnZSIsInNldERvd25sb2FkUHJvZ3Jlc3MiLCJyZXNwb25zZSIsInJ1bkFmdGVyV2FzbUxvYWRlZCIsInJlZ2lzdGVySW5kZXgiLCJzZXREb3dubG9hZEVycm9yIiwiX3N0YXRlIiwiZG93bmxvYWRQcm9ncmVzcyIsInJlc3VsdHMiLCJ0b3RhbFJlc3VsdENvdW50IiwiZXZlbnRMaXN0ZW5lckZ1bmN0aW9ucyIsImhpZ2hsaWdodGVkUmVzdWx0IiwicmVzdWx0c1Zpc2libGUiLCJob3ZlclNlbGVjdEVuYWJsZWQiLCJzaG93UHJvZ3Jlc3MiLCJyZW5kZXIiLCJnZXRDdXJyZW50TWVzc2FnZSIsImRvbU1hbmFnZXIiLCJnZXRRdWVyeSIsIm1pbmltdW1RdWVyeUxlbmd0aCIsImdlbmVyYXRlUmVuZGVyQ29uZmlnIiwic2hvd1Njb3JlcyIsInJlc29sdmUiLCJyZWplY3QiLCJpbmRleEluZm8iLCJwcmludEluZGV4SW5mbyIsImxvZyIsIkVudGl0eURvbSIsImluamVzdFNlYXJjaERhdGEiLCJ0b3RhbF9oaXRfY291bnQiLCJ1cmxQcmVmaXgiLCJ1cmxfcHJlZml4IiwibWFwIiwidXJsU3VmZml4IiwiZXhjZXJwdHMiLCJpbnRlcm5hbF9hbm5vdGF0aW9ucyIsImVudHJ5IiwiZ2V0U2FuaXRpemVkUmVzdWx0cyIsInJlc3VsdCIsInRpdGxlX2hpZ2hsaWdodF9yYW5nZXMiLCJleGNlcnB0IiwiaGlnaGxpZ2h0X3JhbmdlcyIsInBlcmZvcm1TZWFyY2giLCJvblF1ZXJ5VXBkYXRlIiwiaGlkZGVuSW50ZXJmYWNlUmVuZGVyU3RhdGUiLCJzY3JvbGxBbmNob3JQb2ludCIsInNlbGVjdG9yIiwiZWxlbWVudE5hbWUiLCJvdXRwdXQiLCJlbGVtZW50cyIsImxpc3QiLCJjbGFzc05hbWVzIiwiYXR0cmlidXRpb24iLCJjbG9zZUJ1dHRvbiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJpbnB1dElucHV0RXZlbnQiLCJpbnB1dEtleWRvd25FdmVudCIsImhhbmRsZUlucHV0RXZlbnQiLCJoYW5kbGVLZXlEb3duRXZlbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiaW5uZXJIVE1MIiwic2V0VGV4dCIsImFkZCIsImZvY3VzIiwiY2xlYXJEb20iLCJjbGVhciIsInJlbW92ZSIsImNsYXNzTGlzdCIsImxhc3RSZW5kZXJTdGF0ZSIsImdldEZha2VQcm9ncmVzcyIsInN0eWxlIiwid2lkdGgiLCJvcGFjaXR5IiwiZ2VuZXJhdGVPcHRpb25zIiwic2VsZWN0ZWQiLCJsaXN0SXRlbSIsInJlc3VsdFRvTGlzdEl0ZW0iLCJjaGFuZ2VIaWdobGlnaHRlZFJlc3VsdCIsInRvIiwic2hvdWxkU2Nyb2xsVG8iLCJwcmV2ZW50RGVmYXVsdCIsInNlbGVjdFJlc3VsdCIsInNob3dDbG9zZUJ1dHRvbiIsIm9uUmVzdWx0U2VsZWN0ZWQiLCJmaW5hbGx5IiwiYXNzaWduIiwib3B0aW9ucyIsInByZXZpb3VzVmFsdWUiLCJyZXNvbHZlZElkeCIsIk1hdGgiLCJtYXgiLCJtaW4iLCJ0YXJnZXRGb3JTY3JvbGxUbyIsImVsZW1lbnQiLCJjaGlsZHJlbiIsImV4aXN0c0JleW9uZENvbnRhaW5lckJvdW5kcyIsInNjcm9sbEludG9WaWV3IiwiYmVoYXZpb3IiLCJibG9jayIsImlubGluZSIsImV2ZW50Iiwia2V5Q29kZSIsInRhcmdldCIsIm9uUmVzdWx0c0hpZGRlbiIsIm9uSW5wdXRDbGVhcmVkIiwiYXR0cmlidXRlcyIsImVsZW0iLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJqb2luIiwicmVmZXJlbmNlIiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50IiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwidGV4dCIsInRleHROb2RlIiwiY3JlYXRlVGV4dE5vZGUiLCJyZXBsYWNlQ2hpbGQiLCJhcHBlbmRDaGlsZCIsImNvbnRhaW5lciIsImVsZW1Cb3VuZGluZ0JveCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImNvbnRhaW5lckJvdW5kaW5nQm94IiwiYm90dG9tIiwidG9wIiwidGVtcGxhdGUiLCJoaWdobGlnaHQiLCJ0aXRsZSIsInNjb3JlIiwiY29udGVudCIsImZpcnN0RWxlbWVudENoaWxkIiwiaW5zZXJ0Iiwic3RyIiwiaW5kZXgiLCJzdWJzdHIiLCJjaGFyYWN0ZXJzQWxyZWFkeUFkZGVkIiwicmFuZ2UiLCJiZWdpbm5pbmciLCJlbmQiLCJkZWZhdWx0Q29uZmlnIiwib3ZlcnJpZGVzIiwiY29uZmlnS2V5RGlmZiIsImRpZmZlcmVuY2UiLCJwbHVyYWwiLCJpbnZhbGlkS2V5cyIsInN0cmluZ2lmeSIsIm92ZXJyaWRlVmFsIiwiaHRtbCIsInRyaW0iLCJhcnIxIiwiYXJyMiIsInNldDEiLCJTZXQiLCJzZXQyIiwiZGlmZiIsImZyb20iLCJmaWx0ZXIiLCJ4IiwiaGFzIiwiY291bnQiLCJzaW5ndWxhciIsImNhbGxiYWNrcyIsIlhNTEh0dHBSZXF1ZXN0Iiwic3RhdHVzIiwibG9hZGVkIiwidG90YWwiLCJyZXNwb25zZVR5cGUiLCJvcGVuIiwic2VuZCIsImZsdXNoZXMiLCJmbiIsIm92ZXJyaWRlVXJsIl0sIm1hcHBpbmdzIjoic0JBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtK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S04sTUFBTCxlQUFZLEVBQzNCMEwsRUFEVyxRQUlicEwsS0FBS04sTUFBUSxJQUVqQixFQWpDQSxHLDJGQ0FBLFdBT2EsRUFBQXhCLFNBQVcsU0FBQ21OLEdBQ3ZCLElBQU10VSxFQUFNc1UsR0FIViw0Q0FJRixPQUFPLFVBQUt0VSxHQUFLb0gsTUFBSyxXQUVwQixPQUFPcEgsTyw4RUNYWCxXQUVhLEVBQUE4SCxvQkFBc0IsU0FDakM3SixFQUNBK0IsR0FFQSxNQUFvQixpQkFBVC9CLEVBQ0YsSUFBSSxVQUFXLDZDQUdMLGlCQUFSK0IsRUFDRixJQUFJLFVBQVcseUJBR2pCIiwiZmlsZSI6InN0b3JrLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDMpO1xuIiwiY2xhc3MgU3RvcmtFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5uYW1lID0gXCJTdG9ya0Vycm9yXCI7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU3RvcmtFcnJvcjtcbiIsIlxuICAgICAgZnVuY3Rpb24gZ2V0QWJzb2x1dGVVcmwocmVsYXRpdmVVcmwpIHtcbiAgICAgICAgY29uc3QgcHVibGljUGF0aCA9IF9fd2VicGFja19wdWJsaWNfcGF0aF9fO1xuXG4gICAgICAgIGxldCB1cmwgPSAnJztcblxuICAgICAgICBpZiAoIXB1YmxpY1BhdGggfHwgcHVibGljUGF0aC5pbmRleE9mKCc6Ly8nKSA8IDApIHtcbiAgICAgICAgICB1cmwgKz0gd2luZG93LmxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHB1YmxpY1BhdGgpIHtcbiAgICAgICAgICB1cmwgKz0gcHVibGljUGF0aDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1cmwgKz0gJy8nO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVybCArIHJlbGF0aXZlVXJsO1xuICAgICAgfVxuXG5sZXQgd2FzbTtcblxuY29uc3QgaGVhcCA9IG5ldyBBcnJheSgzMikuZmlsbCh1bmRlZmluZWQpO1xuXG5oZWFwLnB1c2godW5kZWZpbmVkLCBudWxsLCB0cnVlLCBmYWxzZSk7XG5cbmZ1bmN0aW9uIGdldE9iamVjdChpZHgpIHsgcmV0dXJuIGhlYXBbaWR4XTsgfVxuXG5sZXQgaGVhcF9uZXh0ID0gaGVhcC5sZW5ndGg7XG5cbmZ1bmN0aW9uIGRyb3BPYmplY3QoaWR4KSB7XG4gICAgaWYgKGlkeCA8IDM2KSByZXR1cm47XG4gICAgaGVhcFtpZHhdID0gaGVhcF9uZXh0O1xuICAgIGhlYXBfbmV4dCA9IGlkeDtcbn1cblxuZnVuY3Rpb24gdGFrZU9iamVjdChpZHgpIHtcbiAgICBjb25zdCByZXQgPSBnZXRPYmplY3QoaWR4KTtcbiAgICBkcm9wT2JqZWN0KGlkeCk7XG4gICAgcmV0dXJuIHJldDtcbn1cblxubGV0IFdBU01fVkVDVE9SX0xFTiA9IDA7XG5cbmxldCBjYWNoZWdldFVpbnQ4TWVtb3J5MCA9IG51bGw7XG5mdW5jdGlvbiBnZXRVaW50OE1lbW9yeTAoKSB7XG4gICAgaWYgKGNhY2hlZ2V0VWludDhNZW1vcnkwID09PSBudWxsIHx8IGNhY2hlZ2V0VWludDhNZW1vcnkwLmJ1ZmZlciAhPT0gd2FzbS5tZW1vcnkuYnVmZmVyKSB7XG4gICAgICAgIGNhY2hlZ2V0VWludDhNZW1vcnkwID0gbmV3IFVpbnQ4QXJyYXkod2FzbS5tZW1vcnkuYnVmZmVyKTtcbiAgICB9XG4gICAgcmV0dXJuIGNhY2hlZ2V0VWludDhNZW1vcnkwO1xufVxuXG5sZXQgY2FjaGVkVGV4dEVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoJ3V0Zi04Jyk7XG5cbmNvbnN0IGVuY29kZVN0cmluZyA9ICh0eXBlb2YgY2FjaGVkVGV4dEVuY29kZXIuZW5jb2RlSW50byA9PT0gJ2Z1bmN0aW9uJ1xuICAgID8gZnVuY3Rpb24gKGFyZywgdmlldykge1xuICAgIHJldHVybiBjYWNoZWRUZXh0RW5jb2Rlci5lbmNvZGVJbnRvKGFyZywgdmlldyk7XG59XG4gICAgOiBmdW5jdGlvbiAoYXJnLCB2aWV3KSB7XG4gICAgY29uc3QgYnVmID0gY2FjaGVkVGV4dEVuY29kZXIuZW5jb2RlKGFyZyk7XG4gICAgdmlldy5zZXQoYnVmKTtcbiAgICByZXR1cm4ge1xuICAgICAgICByZWFkOiBhcmcubGVuZ3RoLFxuICAgICAgICB3cml0dGVuOiBidWYubGVuZ3RoXG4gICAgfTtcbn0pO1xuXG5mdW5jdGlvbiBwYXNzU3RyaW5nVG9XYXNtMChhcmcsIG1hbGxvYywgcmVhbGxvYykge1xuXG4gICAgaWYgKHJlYWxsb2MgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBidWYgPSBjYWNoZWRUZXh0RW5jb2Rlci5lbmNvZGUoYXJnKTtcbiAgICAgICAgY29uc3QgcHRyID0gbWFsbG9jKGJ1Zi5sZW5ndGgpO1xuICAgICAgICBnZXRVaW50OE1lbW9yeTAoKS5zdWJhcnJheShwdHIsIHB0ciArIGJ1Zi5sZW5ndGgpLnNldChidWYpO1xuICAgICAgICBXQVNNX1ZFQ1RPUl9MRU4gPSBidWYubGVuZ3RoO1xuICAgICAgICByZXR1cm4gcHRyO1xuICAgIH1cblxuICAgIGxldCBsZW4gPSBhcmcubGVuZ3RoO1xuICAgIGxldCBwdHIgPSBtYWxsb2MobGVuKTtcblxuICAgIGNvbnN0IG1lbSA9IGdldFVpbnQ4TWVtb3J5MCgpO1xuXG4gICAgbGV0IG9mZnNldCA9IDA7XG5cbiAgICBmb3IgKDsgb2Zmc2V0IDwgbGVuOyBvZmZzZXQrKykge1xuICAgICAgICBjb25zdCBjb2RlID0gYXJnLmNoYXJDb2RlQXQob2Zmc2V0KTtcbiAgICAgICAgaWYgKGNvZGUgPiAweDdGKSBicmVhaztcbiAgICAgICAgbWVtW3B0ciArIG9mZnNldF0gPSBjb2RlO1xuICAgIH1cblxuICAgIGlmIChvZmZzZXQgIT09IGxlbikge1xuICAgICAgICBpZiAob2Zmc2V0ICE9PSAwKSB7XG4gICAgICAgICAgICBhcmcgPSBhcmcuc2xpY2Uob2Zmc2V0KTtcbiAgICAgICAgfVxuICAgICAgICBwdHIgPSByZWFsbG9jKHB0ciwgbGVuLCBsZW4gPSBvZmZzZXQgKyBhcmcubGVuZ3RoICogMyk7XG4gICAgICAgIGNvbnN0IHZpZXcgPSBnZXRVaW50OE1lbW9yeTAoKS5zdWJhcnJheShwdHIgKyBvZmZzZXQsIHB0ciArIGxlbik7XG4gICAgICAgIGNvbnN0IHJldCA9IGVuY29kZVN0cmluZyhhcmcsIHZpZXcpO1xuXG4gICAgICAgIG9mZnNldCArPSByZXQud3JpdHRlbjtcbiAgICB9XG5cbiAgICBXQVNNX1ZFQ1RPUl9MRU4gPSBvZmZzZXQ7XG4gICAgcmV0dXJuIHB0cjtcbn1cblxuZnVuY3Rpb24gcGFzc0FycmF5OFRvV2FzbTAoYXJnLCBtYWxsb2MpIHtcbiAgICBjb25zdCBwdHIgPSBtYWxsb2MoYXJnLmxlbmd0aCAqIDEpO1xuICAgIGdldFVpbnQ4TWVtb3J5MCgpLnNldChhcmcsIHB0ciAvIDEpO1xuICAgIFdBU01fVkVDVE9SX0xFTiA9IGFyZy5sZW5ndGg7XG4gICAgcmV0dXJuIHB0cjtcbn1cblxubGV0IGNhY2hlZ2V0SW50MzJNZW1vcnkwID0gbnVsbDtcbmZ1bmN0aW9uIGdldEludDMyTWVtb3J5MCgpIHtcbiAgICBpZiAoY2FjaGVnZXRJbnQzMk1lbW9yeTAgPT09IG51bGwgfHwgY2FjaGVnZXRJbnQzMk1lbW9yeTAuYnVmZmVyICE9PSB3YXNtLm1lbW9yeS5idWZmZXIpIHtcbiAgICAgICAgY2FjaGVnZXRJbnQzMk1lbW9yeTAgPSBuZXcgSW50MzJBcnJheSh3YXNtLm1lbW9yeS5idWZmZXIpO1xuICAgIH1cbiAgICByZXR1cm4gY2FjaGVnZXRJbnQzMk1lbW9yeTA7XG59XG5cbmxldCBjYWNoZWRUZXh0RGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigndXRmLTgnLCB7IGlnbm9yZUJPTTogdHJ1ZSwgZmF0YWw6IHRydWUgfSk7XG5cbmNhY2hlZFRleHREZWNvZGVyLmRlY29kZSgpO1xuXG5mdW5jdGlvbiBnZXRTdHJpbmdGcm9tV2FzbTAocHRyLCBsZW4pIHtcbiAgICByZXR1cm4gY2FjaGVkVGV4dERlY29kZXIuZGVjb2RlKGdldFVpbnQ4TWVtb3J5MCgpLnN1YmFycmF5KHB0ciwgcHRyICsgbGVuKSk7XG59XG4vKipcbiogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiogQHBhcmFtIHtVaW50OEFycmF5fSBkYXRhXG4qIEByZXR1cm5zIHtzdHJpbmd9XG4qL1xuZXhwb3J0IGZ1bmN0aW9uIHdhc21fcmVnaXN0ZXJfaW5kZXgobmFtZSwgZGF0YSkge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJldHB0ciA9IHdhc20uX193YmluZGdlbl9hZGRfdG9fc3RhY2tfcG9pbnRlcigtMTYpO1xuICAgICAgICB2YXIgcHRyMCA9IHBhc3NTdHJpbmdUb1dhc20wKG5hbWUsIHdhc20uX193YmluZGdlbl9tYWxsb2MsIHdhc20uX193YmluZGdlbl9yZWFsbG9jKTtcbiAgICAgICAgdmFyIGxlbjAgPSBXQVNNX1ZFQ1RPUl9MRU47XG4gICAgICAgIHZhciBwdHIxID0gcGFzc0FycmF5OFRvV2FzbTAoZGF0YSwgd2FzbS5fX3diaW5kZ2VuX21hbGxvYyk7XG4gICAgICAgIHZhciBsZW4xID0gV0FTTV9WRUNUT1JfTEVOO1xuICAgICAgICB3YXNtLndhc21fcmVnaXN0ZXJfaW5kZXgocmV0cHRyLCBwdHIwLCBsZW4wLCBwdHIxLCBsZW4xKTtcbiAgICAgICAgdmFyIHIwID0gZ2V0SW50MzJNZW1vcnkwKClbcmV0cHRyIC8gNCArIDBdO1xuICAgICAgICB2YXIgcjEgPSBnZXRJbnQzMk1lbW9yeTAoKVtyZXRwdHIgLyA0ICsgMV07XG4gICAgICAgIHJldHVybiBnZXRTdHJpbmdGcm9tV2FzbTAocjAsIHIxKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgICB3YXNtLl9fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIoMTYpO1xuICAgICAgICB3YXNtLl9fd2JpbmRnZW5fZnJlZShyMCwgcjEpO1xuICAgIH1cbn1cblxuLyoqXG4qIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4qIEBwYXJhbSB7c3RyaW5nfSBxdWVyeVxuKiBAcmV0dXJucyB7c3RyaW5nfVxuKi9cbmV4cG9ydCBmdW5jdGlvbiB3YXNtX3NlYXJjaChuYW1lLCBxdWVyeSkge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJldHB0ciA9IHdhc20uX193YmluZGdlbl9hZGRfdG9fc3RhY2tfcG9pbnRlcigtMTYpO1xuICAgICAgICB2YXIgcHRyMCA9IHBhc3NTdHJpbmdUb1dhc20wKG5hbWUsIHdhc20uX193YmluZGdlbl9tYWxsb2MsIHdhc20uX193YmluZGdlbl9yZWFsbG9jKTtcbiAgICAgICAgdmFyIGxlbjAgPSBXQVNNX1ZFQ1RPUl9MRU47XG4gICAgICAgIHZhciBwdHIxID0gcGFzc1N0cmluZ1RvV2FzbTAocXVlcnksIHdhc20uX193YmluZGdlbl9tYWxsb2MsIHdhc20uX193YmluZGdlbl9yZWFsbG9jKTtcbiAgICAgICAgdmFyIGxlbjEgPSBXQVNNX1ZFQ1RPUl9MRU47XG4gICAgICAgIHdhc20ud2FzbV9zZWFyY2gocmV0cHRyLCBwdHIwLCBsZW4wLCBwdHIxLCBsZW4xKTtcbiAgICAgICAgdmFyIHIwID0gZ2V0SW50MzJNZW1vcnkwKClbcmV0cHRyIC8gNCArIDBdO1xuICAgICAgICB2YXIgcjEgPSBnZXRJbnQzMk1lbW9yeTAoKVtyZXRwdHIgLyA0ICsgMV07XG4gICAgICAgIHJldHVybiBnZXRTdHJpbmdGcm9tV2FzbTAocjAsIHIxKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgICB3YXNtLl9fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIoMTYpO1xuICAgICAgICB3YXNtLl9fd2JpbmRnZW5fZnJlZShyMCwgcjEpO1xuICAgIH1cbn1cblxuLyoqXG4qIEByZXR1cm5zIHtzdHJpbmd9XG4qL1xuZXhwb3J0IGZ1bmN0aW9uIHdhc21fc3RvcmtfdmVyc2lvbigpIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZXRwdHIgPSB3YXNtLl9fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIoLTE2KTtcbiAgICAgICAgd2FzbS53YXNtX3N0b3JrX3ZlcnNpb24ocmV0cHRyKTtcbiAgICAgICAgdmFyIHIwID0gZ2V0SW50MzJNZW1vcnkwKClbcmV0cHRyIC8gNCArIDBdO1xuICAgICAgICB2YXIgcjEgPSBnZXRJbnQzMk1lbW9yeTAoKVtyZXRwdHIgLyA0ICsgMV07XG4gICAgICAgIHJldHVybiBnZXRTdHJpbmdGcm9tV2FzbTAocjAsIHIxKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgICB3YXNtLl9fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIoMTYpO1xuICAgICAgICB3YXNtLl9fd2JpbmRnZW5fZnJlZShyMCwgcjEpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gYWRkSGVhcE9iamVjdChvYmopIHtcbiAgICBpZiAoaGVhcF9uZXh0ID09PSBoZWFwLmxlbmd0aCkgaGVhcC5wdXNoKGhlYXAubGVuZ3RoICsgMSk7XG4gICAgY29uc3QgaWR4ID0gaGVhcF9uZXh0O1xuICAgIGhlYXBfbmV4dCA9IGhlYXBbaWR4XTtcblxuICAgIGhlYXBbaWR4XSA9IG9iajtcbiAgICByZXR1cm4gaWR4O1xufVxuXG5hc3luYyBmdW5jdGlvbiBsb2FkKG1vZHVsZSwgaW1wb3J0cykge1xuICAgIGlmICh0eXBlb2YgUmVzcG9uc2UgPT09ICdmdW5jdGlvbicgJiYgbW9kdWxlIGluc3RhbmNlb2YgUmVzcG9uc2UpIHtcblxuICAgICAgICBpZiAodHlwZW9mIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZVN0cmVhbWluZyhtb2R1bGUsIGltcG9ydHMpO1xuXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1vZHVsZS5oZWFkZXJzLmdldCgnQ29udGVudC1UeXBlJykgIT0gJ2FwcGxpY2F0aW9uL3dhc20nKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcImBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZVN0cmVhbWluZ2AgZmFpbGVkIGJlY2F1c2UgeW91ciBzZXJ2ZXIgZG9lcyBub3Qgc2VydmUgd2FzbSB3aXRoIGBhcHBsaWNhdGlvbi93YXNtYCBNSU1FIHR5cGUuIEZhbGxpbmcgYmFjayB0byBgV2ViQXNzZW1ibHkuaW5zdGFudGlhdGVgIHdoaWNoIGlzIHNsb3dlci4gT3JpZ2luYWwgZXJyb3I6XFxuXCIsIGUpO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBieXRlcyA9IGF3YWl0IG1vZHVsZS5hcnJheUJ1ZmZlcigpO1xuICAgICAgICByZXR1cm4gYXdhaXQgV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUoYnl0ZXMsIGltcG9ydHMpO1xuXG4gICAgfSBlbHNlIHtcblxuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IGF3YWl0IFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKG1vZHVsZSwgaW1wb3J0cyk7XG5cbiAgICAgICAgaWYgKGluc3RhbmNlIGluc3RhbmNlb2YgV2ViQXNzZW1ibHkuSW5zdGFuY2UpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGluc3RhbmNlLCBtb2R1bGUgfTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBpbml0KGlucHV0KSB7XG4gICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaW5wdXQgPSAoeyB1cmw6IGdldEFic29sdXRlVXJsKCdub2RlX21vZHVsZXMvc3Rvcmstc2VhcmNoL3N0b3JrLmpzJykgfSkudXJsLnJlcGxhY2UoL1xcLmpzJC8sICdfYmcud2FzbScpO1xuICAgIH1cbiAgICBjb25zdCBpbXBvcnRzID0ge307XG4gICAgaW1wb3J0cy53YmcgPSB7fTtcbiAgICBpbXBvcnRzLndiZy5fX3diZ19uZXdfNTljYjc0ZTQyMzc1OGVkZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcmV0ID0gbmV3IEVycm9yKCk7XG4gICAgICAgIHJldHVybiBhZGRIZWFwT2JqZWN0KHJldCk7XG4gICAgfTtcbiAgICBpbXBvcnRzLndiZy5fX3diZ19zdGFja181NThiYTU5MTdiNDY2ZWRkID0gZnVuY3Rpb24oYXJnMCwgYXJnMSkge1xuICAgICAgICB2YXIgcmV0ID0gZ2V0T2JqZWN0KGFyZzEpLnN0YWNrO1xuICAgICAgICB2YXIgcHRyMCA9IHBhc3NTdHJpbmdUb1dhc20wKHJldCwgd2FzbS5fX3diaW5kZ2VuX21hbGxvYywgd2FzbS5fX3diaW5kZ2VuX3JlYWxsb2MpO1xuICAgICAgICB2YXIgbGVuMCA9IFdBU01fVkVDVE9SX0xFTjtcbiAgICAgICAgZ2V0SW50MzJNZW1vcnkwKClbYXJnMCAvIDQgKyAxXSA9IGxlbjA7XG4gICAgICAgIGdldEludDMyTWVtb3J5MCgpW2FyZzAgLyA0ICsgMF0gPSBwdHIwO1xuICAgIH07XG4gICAgaW1wb3J0cy53YmcuX193YmdfZXJyb3JfNGJiNmMyYTk3NDA3MTI5YSA9IGZ1bmN0aW9uKGFyZzAsIGFyZzEpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZ2V0U3RyaW5nRnJvbVdhc20wKGFyZzAsIGFyZzEpKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHdhc20uX193YmluZGdlbl9mcmVlKGFyZzAsIGFyZzEpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBpbXBvcnRzLndiZy5fX3diaW5kZ2VuX29iamVjdF9kcm9wX3JlZiA9IGZ1bmN0aW9uKGFyZzApIHtcbiAgICAgICAgdGFrZU9iamVjdChhcmcwKTtcbiAgICB9O1xuXG4gICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgfHwgKHR5cGVvZiBSZXF1ZXN0ID09PSAnZnVuY3Rpb24nICYmIGlucHV0IGluc3RhbmNlb2YgUmVxdWVzdCkgfHwgKHR5cGVvZiBVUkwgPT09ICdmdW5jdGlvbicgJiYgaW5wdXQgaW5zdGFuY2VvZiBVUkwpKSB7XG4gICAgICAgIGlucHV0ID0gZmV0Y2goaW5wdXQpO1xuICAgIH1cblxuICAgIGNvbnN0IHsgaW5zdGFuY2UsIG1vZHVsZSB9ID0gYXdhaXQgbG9hZChhd2FpdCBpbnB1dCwgaW1wb3J0cyk7XG5cbiAgICB3YXNtID0gaW5zdGFuY2UuZXhwb3J0cztcbiAgICBpbml0Ll9fd2JpbmRnZW5fd2FzbV9tb2R1bGUgPSBtb2R1bGU7XG5cbiAgICByZXR1cm4gd2FzbTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgaW5pdDtcblxuIiwiaW1wb3J0IHsgd2FzbV9zZWFyY2ggfSBmcm9tIFwic3Rvcmstc2VhcmNoXCI7XG5pbXBvcnQgU3RvcmtFcnJvciBmcm9tIFwiLi9zdG9ya0Vycm9yXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSGlnaGxpZ2h0UmFuZ2Uge1xuICBiZWdpbm5pbmc6IG51bWJlcjtcbiAgZW5kOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRW50cnkge1xuICBmaWVsZHM6IFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuICB0aXRsZTogc3RyaW5nO1xuICB1cmw6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFeGNlcnB0IHtcbiAgZmllbGRzOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcbiAgaW50ZXJuYWxfYW5ub3RhdGlvbnM/OiBBcnJheTxSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj47XG4gIGhpZ2hsaWdodF9yYW5nZXM/OiBBcnJheTxIaWdobGlnaHRSYW5nZT47XG4gIHNjb3JlOiBudW1iZXI7XG4gIHRleHQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZXN1bHQge1xuICBlbnRyeTogRW50cnk7XG4gIGV4Y2VycHRzOiBBcnJheTxFeGNlcnB0PjtcbiAgc2NvcmU6IG51bWJlcjtcbiAgdGl0bGVfaGlnaGxpZ2h0X3Jhbmdlcz86IEFycmF5PEhpZ2hsaWdodFJhbmdlPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZWFyY2hEYXRhIHtcbiAgcmVzdWx0czogQXJyYXk8UmVzdWx0PjtcbiAgdG90YWxfaGl0X2NvdW50OiBudW1iZXI7XG4gIHVybF9wcmVmaXg6IHN0cmluZztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVTZWFyY2gobmFtZTogc3RyaW5nLCBxdWVyeTogc3RyaW5nKTogU2VhcmNoRGF0YSB7XG4gIGxldCBzZWFyY2hPdXRwdXQgPSBudWxsO1xuICBsZXQgZGF0YSA9IG51bGw7XG5cbiAgdHJ5IHtcbiAgICBzZWFyY2hPdXRwdXQgPSB3YXNtX3NlYXJjaChuYW1lLCBxdWVyeSk7XG4gICAgLy8gSWYgd2FzbV9zZWFyY2ggcmV0dXJucyBhbiBlcnJvciwgaXQgd2lsbCByZXR1cm4gYSBKU09OIGJsb2IuIExvb2sgZm9yXG4gICAgLy8gZGF0YS5lcnJvciB0byBzZWUgaWYgdGhpcyBpcyB0aGUgY2FzZS5cbiAgICBkYXRhID0gSlNPTi5wYXJzZShzZWFyY2hPdXRwdXQpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gRGF0YSBoYXMgY29tZSBiYWNrIGltcHJvcGVybHksIGV2ZW4gYmV5b25kIGFuIGVycm9yIGluIFJ1c3QtbGFuZC5cbiAgICAvLyBhbmFseXRpY3MubG9nKGUpXG4gICAgdGhyb3cgbmV3IFN0b3JrRXJyb3IoXG4gICAgICBcIkNvdWxkIG5vdCBwYXJzZSBkYXRhIGZyb20gd2FzbV9zZWFyY2guIElmIHlvdSBzZWUgdGhpcywgcGxlYXNlIGZpbGUgYSBidWc6IGh0dHBzOi8vamlsLmltL3N0b3JrYnVnIFwiICtcbiAgICAgICAgc2VhcmNoT3V0cHV0XG4gICAgKTtcbiAgfVxuXG4gIGlmICghZGF0YSkge1xuICAgIHRocm93IG5ldyBTdG9ya0Vycm9yKFwiRGF0YSB3YXMgYW4gZW1wdHkgb2JqZWN0XCIpO1xuICB9XG5cbiAgaWYgKGRhdGEuZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgU3RvcmtFcnJvcihgQ291bGQgbm90IHBlcmZvcm0gc2VhcmNoOiB0aGUgV0FTTSBiaW5hcnkgZmFpbGVkIHRvIHJldHVybiBzZWFyY2ggcmVzdWx0cy5cbiAgICBZb3UgbWlnaHQgbm90IGJlIHNlcnZpbmcgeW91ciBzZWFyY2ggaW5kZXggcHJvcGVybHkuXG4gICAgSWYgeW91IHRoaW5rIHRoaXMgaXMgYW4gZXJyb3IsIHBsZWFzZSBmaWxlIGEgYnVnOiBodHRwczovL2ppbC5pbS9zdG9ya2J1Z1xuICAgIFxuICAgIFRoZSBXQVNNIGJpbmFyeSBjYW1lIGJhY2sgd2l0aDpcbiAgICAke2RhdGEuZXJyb3J9YCk7XG4gIH1cblxuICByZXR1cm4gZGF0YTtcbn1cbiIsImltcG9ydCB7IENvbmZpZ3VyYXRpb24gfSBmcm9tIFwiLi9jb25maWdcIjtcbmltcG9ydCB7IEVudGl0eU1hbmFnZXIgfSBmcm9tIFwiLi9lbnRpdHlNYW5hZ2VyXCI7XG5pbXBvcnQgV2FzbVF1ZXVlIGZyb20gXCIuL3dhc21RdWV1ZVwiO1xuaW1wb3J0IHsgbG9hZFdhc20gfSBmcm9tIFwiLi9sb2FkZXJzL3dhc21Mb2FkZXJcIjtcbmltcG9ydCB7IHJlc29sdmVTZWFyY2gsIFNlYXJjaERhdGEgfSBmcm9tIFwiLi9zZWFyY2hEYXRhXCI7XG5pbXBvcnQgU3RvcmtFcnJvciBmcm9tIFwiLi9zdG9ya0Vycm9yXCI7XG5pbXBvcnQgeyB2YWxpZGF0ZUluZGV4UGFyYW1zIH0gZnJvbSBcIi4vdmFsaWRhdG9ycy9pbmRleFBhcmFtVmFsaWRhdG9yXCI7XG5pbXBvcnQgeyB3YXNtX3N0b3JrX3ZlcnNpb24gfSBmcm9tIFwic3Rvcmstc2VhcmNoXCI7XG5cbi8vIEhvbGRzIHRoZSBVUkwgb2YgdGhlIGN1cnJlbnRseSBsb2FkZWQgV0FTTSBibG9iLCBvciBgbnVsbGAgaWYgdGhlIFdBU01cbi8vIGhhc24ndCBiZWVuIGxvYWRlZCB5ZXQuXG5sZXQgbG9hZGVkV2FzbVVybDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cbmNvbnN0IHdhc21RdWV1ZTogV2FzbVF1ZXVlID0gbmV3IFdhc21RdWV1ZSgpO1xuY29uc3QgZW50aXR5TWFuYWdlcjogRW50aXR5TWFuYWdlciA9IG5ldyBFbnRpdHlNYW5hZ2VyKHdhc21RdWV1ZSk7XG5cbmZ1bmN0aW9uIGluaXRpYWxpemUod2FzbU92ZXJyaWRlVXJsOiBzdHJpbmcgfCBudWxsID0gbnVsbCk6IFByb21pc2U8dm9pZD4ge1xuICByZXR1cm4gbG9hZFdhc20od2FzbU92ZXJyaWRlVXJsKVxuICAgIC50aGVuKGZyb21VcmwgPT4ge1xuICAgICAgd2FzbVF1ZXVlLmZsdXNoKCk7XG4gICAgICBsb2FkZWRXYXNtVXJsID0gZnJvbVVybDtcbiAgICB9KVxuICAgIC5jYXRjaChlID0+IHtcbiAgICAgIC8vIFNlbmQgZXJyb3IgdG8gZW50aXR5IG1hbmFnZXJcbiAgICAgIHRocm93IG5ldyBTdG9ya0Vycm9yKGUpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBkb3dubG9hZEluZGV4KG5hbWU6IHN0cmluZywgdXJsOiBzdHJpbmcsIGNvbmZpZyA9IHt9KTogUHJvbWlzZTx2b2lkPiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHtcbiAgICBjb25zdCB2YWxpZGF0aW9uRXJyb3IgPSB2YWxpZGF0ZUluZGV4UGFyYW1zKG5hbWUsIHVybCk7XG4gICAgaWYgKHZhbGlkYXRpb25FcnJvcikge1xuICAgICAgcmVqKHZhbGlkYXRpb25FcnJvcik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZW50aXR5TWFuYWdlci5yZWdpc3RlcihuYW1lLCB1cmwsIGNvbmZpZykudGhlbihyZXMpLmNhdGNoKHJlaik7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBhdHRhY2gobmFtZTogc3RyaW5nKTogdm9pZCB7XG4gIHRyeSB7XG4gICAgZW50aXR5TWFuYWdlci5hdHRhY2hUb0RvbShuYW1lKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IG5ldyBTdG9ya0Vycm9yKGUubWVzc2FnZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVnaXN0ZXIoXG4gIG5hbWU6IHN0cmluZyxcbiAgdXJsOiBzdHJpbmcsXG4gIGNvbmZpZzogUGFydGlhbDxDb25maWd1cmF0aW9uPlxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IGluaXRQcm9taXNlID0gaW5pdGlhbGl6ZSgpO1xuICBjb25zdCBkb253bG9hZFByb21pc2UgPSBkb3dubG9hZEluZGV4KG5hbWUsIHVybCwgY29uZmlnKTtcbiAgYXR0YWNoKG5hbWUpO1xuXG4gIC8vIFRoaXMgc2lsbHkgYHRoZW5gIGNhbGwgdHVybnMgYSBbKHZvaWQpLCAodm9pZCldIGludG8gYSAodm9pZCksIHdoaWNoIGlzXG4gIC8vIG9ubHkgbmVjZXNzYXJ5IHRvIG1ha2UgVHlwZXNjcmlwdCBoYXBweS5cbiAgLy8gWW91IGJlZ2luIHRvIHdvbmRlciBpZiB5b3Ugd3JpdGUgVHlwZXNjcmlwdCBjb2RlLCBvciBpZiBUeXBlc2NyaXB0IGNvZGUgd3JpdGVzIHlvdS5cbiAgcmV0dXJuIFByb21pc2UuYWxsKFtpbml0UHJvbWlzZSwgZG9ud2xvYWRQcm9taXNlXSkudGhlbigpO1xufVxuXG5mdW5jdGlvbiBzZWFyY2gobmFtZTogc3RyaW5nLCBxdWVyeTogc3RyaW5nKTogU2VhcmNoRGF0YSB7XG4gIGlmICghbmFtZSB8fCAhcXVlcnkpIHtcbiAgICB0aHJvdyBuZXcgU3RvcmtFcnJvcihcbiAgICAgIFwiTWFrZSBzdXJlIHRvIGNhbGwgc3Rvcmsuc2VhcmNoKCkgd2l0aCB0d28gYXJndW1lbnRzOiB0aGUgaW5kZXggbmFtZSBhbmQgdGhlIHNlYXJjaCBxdWVyeS5cIlxuICAgICk7XG4gIH1cblxuICBpZiAoZW50aXR5TWFuYWdlci5lbnRpdGllc1tuYW1lXT8uc3RhdGUgIT0gXCJyZWFkeVwiKSB7XG4gICAgdGhyb3cgbmV3IFN0b3JrRXJyb3IoXG4gICAgICBcIkNvdWxkbid0IGZpbmQgaW5kZXguIE1ha2Ugc3VyZSB0aGUgc3RvcmsuZG93bmxvYWRJbmRleCgpIHByb21pc2UgaGFzIHJlc29sdmVkIGJlZm9yZSBjYWxsaW5nIHN0b3JrLnNlYXJjaCgpLlwiXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiByZXNvbHZlU2VhcmNoKG5hbWUsIHF1ZXJ5KTtcbn1cblxuZnVuY3Rpb24gZGVidWcoKTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4ge1xuICByZXR1cm4ge1xuICAgIHdhc21RdWV1ZU1ldGhvZHM6IHdhc21RdWV1ZS5xdWV1ZS5sZW5ndGgsXG4gICAgbG9hZGVkV2FzbVVybDogbG9hZGVkV2FzbVVybCxcbiAgICBpbmRleGVzOiBlbnRpdHlNYW5hZ2VyLmVudGl0aWVzLFxuICAgIGluZGV4Q291bnQ6IE9iamVjdC5rZXlzKGVudGl0eU1hbmFnZXIuZW50aXRpZXMpLmxlbmd0aCxcbiAgICBqc1N0b3JrVmVyc2lvbjogcHJvY2Vzcy5lbnYuVkVSU0lPTixcbiAgICB3YXNtU3RvcmtWZXJzaW9uOiB3YXNtX3N0b3JrX3ZlcnNpb24oKVxuICB9O1xufVxuXG5leHBvcnQgeyBpbml0aWFsaXplLCBkb3dubG9hZEluZGV4LCBhdHRhY2gsIHNlYXJjaCwgcmVnaXN0ZXIsIGRlYnVnIH07XG4iLCJpbXBvcnQgeyBFbnRpdHkgfSBmcm9tIFwiLi9lbnRpdHlcIjtcbmltcG9ydCB7IENvbmZpZ3VyYXRpb24sIGNhbGN1bGF0ZU92ZXJyaWRkZW5Db25maWcgfSBmcm9tIFwiLi9jb25maWdcIjtcbmltcG9ydCB7IGxvYWRJbmRleEZyb21VcmwgfSBmcm9tIFwiLi9sb2FkZXJzL2luZGV4TG9hZGVyXCI7XG5pbXBvcnQgV2FzbVF1ZXVlIGZyb20gXCIuL3dhc21RdWV1ZVwiO1xuaW1wb3J0IFN0b3JrRXJyb3IgZnJvbSBcIi4vc3RvcmtFcnJvclwiO1xuXG5leHBvcnQgY2xhc3MgRW50aXR5TWFuYWdlciB7XG4gIGVudGl0aWVzOiBSZWNvcmQ8c3RyaW5nLCBFbnRpdHk+ID0ge307XG4gIHdhc21RdWV1ZTogV2FzbVF1ZXVlO1xuXG4gIGNvbnN0cnVjdG9yKHdhc21RdWV1ZTogV2FzbVF1ZXVlKSB7XG4gICAgdGhpcy53YXNtUXVldWUgPSB3YXNtUXVldWU7XG4gIH1cblxuICBwdWJsaWMgcmVnaXN0ZXIoXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIHVybDogc3RyaW5nLFxuICAgIHBhcnRpYWxDb25maWc6IFBhcnRpYWw8Q29uZmlndXJhdGlvbj5cbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xuICAgICAgY29uc3QgZnVsbENvbmZpZyA9IGNhbGN1bGF0ZU92ZXJyaWRkZW5Db25maWcocGFydGlhbENvbmZpZyk7XG4gICAgICBpZiAoZnVsbENvbmZpZyBpbnN0YW5jZW9mIFN0b3JrRXJyb3IpIHtcbiAgICAgICAgcmVqKGZ1bGxDb25maWcpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmVudGl0aWVzW25hbWVdICYmICFmdWxsQ29uZmlnLmZvcmNlT3ZlcndyaXRlKSB7XG4gICAgICAgIHRocm93IG5ldyBTdG9ya0Vycm9yKFxuICAgICAgICAgIGBZb3UncmUgcmVnaXN0ZXJpbmcgYW4gaW5kZXggbmFtZWQgXFxgJHtuYW1lfVxcYCwgYnV0IHRoYXQgYWxyZWFkeSBleGlzdHMuIElmIHRoaXMgaXMgZXhwZWN0ZWQsIHNldCBmb3JjZU92ZXJ3cml0ZSB0byB0cnVlIGluIHlvdXIgSmF2YXNjcmlwdCBjb25maWcgdG8gYWxsb3cgb3ZlcndyaXRpbmcgaW5kZXhlcy5gXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGVudGl0eSA9IG5ldyBFbnRpdHkobmFtZSwgdXJsLCBmdWxsQ29uZmlnKTtcbiAgICAgIHRoaXMuZW50aXRpZXNbbmFtZV0gPSBlbnRpdHk7XG5cbiAgICAgIGxvYWRJbmRleEZyb21VcmwodXJsLCB7XG4gICAgICAgIHByb2dyZXNzOiBwZXJjZW50YWdlID0+IHtcbiAgICAgICAgICBlbnRpdHkuc2V0RG93bmxvYWRQcm9ncmVzcyhwZXJjZW50YWdlKTtcbiAgICAgICAgfSxcblxuICAgICAgICBsb2FkOiByZXNwb25zZSA9PiB7XG4gICAgICAgICAgdGhpcy53YXNtUXVldWUucnVuQWZ0ZXJXYXNtTG9hZGVkKCgpID0+IHtcbiAgICAgICAgICAgIGVudGl0eS5yZWdpc3RlckluZGV4KG5ldyBVaW50OEFycmF5KHJlc3BvbnNlKSkudGhlbihyZXMpLmNhdGNoKHJlaik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZXJyb3I6ICgpID0+IHtcbiAgICAgICAgICBlbnRpdHkuc2V0RG93bmxvYWRFcnJvcigpO1xuICAgICAgICAgIHJlaigpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBhdHRhY2hUb0RvbShuYW1lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuZW50aXRpZXNbbmFtZV0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSW5kZXggJHtuYW1lfSBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZCFgKTtcbiAgICB9XG5cbiAgICB0aGlzLmVudGl0aWVzW25hbWVdLmF0dGFjaFRvRG9tKCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IENvbmZpZ3VyYXRpb24gfSBmcm9tIFwiLi9jb25maWdcIjtcbmltcG9ydCB7IFJlc3VsdCwgU2VhcmNoRGF0YSwgcmVzb2x2ZVNlYXJjaCB9IGZyb20gXCIuL3NlYXJjaERhdGFcIjtcbmltcG9ydCB7IEVudGl0eURvbSwgUmVuZGVyU3RhdGUgfSBmcm9tIFwiLi9lbnRpdHlEb21cIjtcbmltcG9ydCB7IHdhc21fcmVnaXN0ZXJfaW5kZXggfSBmcm9tIFwic3Rvcmstc2VhcmNoXCI7XG5pbXBvcnQgU3RvcmtFcnJvciBmcm9tIFwiLi9zdG9ya0Vycm9yXCI7XG5cbmV4cG9ydCB0eXBlIEVudGl0eVN0YXRlID0gXCJpbml0aWFsaXplZFwiIHwgXCJsb2FkaW5nXCIgfCBcInJlYWR5XCIgfCBcImVycm9yXCI7XG5cbmV4cG9ydCBjbGFzcyBFbnRpdHkge1xuICByZWFkb25seSBuYW1lOiBzdHJpbmc7XG4gIHJlYWRvbmx5IHVybDogc3RyaW5nO1xuICByZWFkb25seSBjb25maWc6IENvbmZpZ3VyYXRpb247XG5cbiAgcHJpdmF0ZSBfc3RhdGU6IEVudGl0eVN0YXRlID0gXCJpbml0aWFsaXplZFwiO1xuXG4gIGRvd25sb2FkUHJvZ3Jlc3MgPSAwO1xuXG4gIGluZGV4OiBVaW50OEFycmF5O1xuICByZXN1bHRzOiBBcnJheTxSZXN1bHQ+ID0gW107XG4gIHRvdGFsUmVzdWx0Q291bnQgPSAwO1xuXG4gIGRvbU1hbmFnZXI6IEVudGl0eURvbSB8IG51bGw7XG4gIGV2ZW50TGlzdGVuZXJGdW5jdGlvbnM6IFJlY29yZDxzdHJpbmcsIChlOiBFdmVudCkgPT4gdm9pZD4gPSB7fTtcbiAgaGlnaGxpZ2h0ZWRSZXN1bHQgPSAwO1xuICByZXN1bHRzVmlzaWJsZSA9IGZhbHNlO1xuICBob3ZlclNlbGVjdEVuYWJsZWQgPSB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yKG5hbWU6IHN0cmluZywgdXJsOiBzdHJpbmcsIGNvbmZpZzogQ29uZmlndXJhdGlvbikge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy51cmwgPSB1cmw7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBwdWJsaWMgZ2V0IHN0YXRlKCk6IEVudGl0eVN0YXRlIHtcbiAgICByZXR1cm4gdGhpcy5fc3RhdGU7XG4gIH1cblxuICBwdWJsaWMgc2V0IHN0YXRlKHZhbHVlOiBFbnRpdHlTdGF0ZSkge1xuICAgIHRoaXMuX3N0YXRlID0gdmFsdWU7XG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0Q3VycmVudE1lc3NhZ2UoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgaWYgKCF0aGlzLmRvbU1hbmFnZXIpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5kb21NYW5hZ2VyLmdldFF1ZXJ5KCk7XG4gICAgaWYgKHRoaXMuc3RhdGUgPT09IFwiZXJyb3JcIikge1xuICAgICAgcmV0dXJuIFwiRXJyb3IhIENoZWNrIHRoZSBicm93c2VyIGNvbnNvbGUuXCI7XG4gICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlICE9IFwicmVhZHlcIikge1xuICAgICAgcmV0dXJuIFwiTG9hZGluZy4uLlwiO1xuICAgIH0gZWxzZSBpZiAocXVlcnk/Lmxlbmd0aCA8IHRoaXMuY29uZmlnLm1pbmltdW1RdWVyeUxlbmd0aCkge1xuICAgICAgcmV0dXJuIFwiRmlsdGVyaW5nLi4uXCI7XG4gICAgfSBlbHNlIGlmICh0aGlzLnJlc3VsdHMpIHtcbiAgICAgIGlmICh0aGlzLnRvdGFsUmVzdWx0Q291bnQgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIFwiTm8gZmlsZXMgZm91bmQuXCI7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMudG90YWxSZXN1bHRDb3VudCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gXCIxIGZpbGUgZm91bmQuXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYCR7dGhpcy50b3RhbFJlc3VsdENvdW50fSBmaWxlcyBmb3VuZC5gO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZVJlbmRlckNvbmZpZygpOiBSZW5kZXJTdGF0ZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3VsdHM6IHRoaXMucmVzdWx0cyxcbiAgICAgIHJlc3VsdHNWaXNpYmxlOiB0cnVlLFxuICAgICAgc2hvd1Njb3JlczogdGhpcy5jb25maWcuc2hvd1Njb3JlcyxcbiAgICAgIG1lc3NhZ2U6IHRoaXMuZ2V0Q3VycmVudE1lc3NhZ2UoKSxcbiAgICAgIHNob3dQcm9ncmVzczogdGhpcy5jb25maWcuc2hvd1Byb2dyZXNzLFxuICAgICAgcHJvZ3Jlc3M6IHRoaXMuZG93bmxvYWRQcm9ncmVzcyxcbiAgICAgIHN0YXRlOiB0aGlzLnN0YXRlXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyKCkge1xuICAgIGlmICghdGhpcy5kb21NYW5hZ2VyKSByZXR1cm47XG4gICAgdGhpcy5kb21NYW5hZ2VyLnJlbmRlcih0aGlzLmdlbmVyYXRlUmVuZGVyQ29uZmlnKCkpO1xuICB9XG5cbiAgcmVnaXN0ZXJJbmRleChkYXRhOiBVaW50OEFycmF5KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IGluZGV4SW5mbyA9IEpTT04ucGFyc2Uod2FzbV9yZWdpc3Rlcl9pbmRleCh0aGlzLm5hbWUsIGRhdGEpKTtcbiAgICAgIGlmIChpbmRleEluZm8uZXJyb3IpIHtcbiAgICAgICAgcmVqZWN0KG5ldyBTdG9ya0Vycm9yKGluZGV4SW5mby5lcnJvcikpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLnByaW50SW5kZXhJbmZvKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coaW5kZXhJbmZvKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3RhdGUgPSBcInJlYWR5XCI7XG4gICAgICAgIHJlc29sdmUoaW5kZXhJbmZvKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGF0dGFjaFRvRG9tKCk6IHZvaWQge1xuICAgIHRoaXMuZG9tTWFuYWdlciA9IG5ldyBFbnRpdHlEb20odGhpcy5uYW1lLCB0aGlzKTtcbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbiAgaW5qZXN0U2VhcmNoRGF0YShkYXRhOiBTZWFyY2hEYXRhKTogdm9pZCB7XG4gICAgdGhpcy5yZXN1bHRzID0gZGF0YS5yZXN1bHRzO1xuICAgIHRoaXMudG90YWxSZXN1bHRDb3VudCA9IGRhdGEudG90YWxfaGl0X2NvdW50O1xuICAgIHRoaXMuaGlnaGxpZ2h0ZWRSZXN1bHQgPSAwO1xuXG4gICAgLy8gTXV0YXRlIHRoZSByZXN1bHQgVVJMLCBsaWtlIHdlIGRvIHdoZW4gdGhlcmUncyBhIHVybCBwcmVmaXggb3Igc3VmZml4XG4gICAgY29uc3QgdXJsUHJlZml4ID0gZGF0YS51cmxfcHJlZml4IHx8IFwiXCI7XG4gICAgdGhpcy5yZXN1bHRzLm1hcChyID0+IHtcbiAgICAgIGxldCB1cmxTdWZmaXggPSBcIlwiO1xuXG4gICAgICAvLyBvb2ZcbiAgICAgIGlmIChcbiAgICAgICAgci5leGNlcnB0cyAmJlxuICAgICAgICByLmV4Y2VycHRzWzBdICYmXG4gICAgICAgIHIuZXhjZXJwdHNbMF0uaW50ZXJuYWxfYW5ub3RhdGlvbnMgJiZcbiAgICAgICAgci5leGNlcnB0c1swXS5pbnRlcm5hbF9hbm5vdGF0aW9uc1swXSAmJlxuICAgICAgICByLmV4Y2VycHRzWzBdLmludGVybmFsX2Fubm90YXRpb25zWzBdW1wiYVwiXSAmJlxuICAgICAgICB0eXBlb2Ygci5leGNlcnB0c1swXS5pbnRlcm5hbF9hbm5vdGF0aW9uc1swXVtcImFcIl0gPT09IFwic3RyaW5nXCJcbiAgICAgICkge1xuICAgICAgICB1cmxTdWZmaXggPSByLmV4Y2VycHRzWzBdLmludGVybmFsX2Fubm90YXRpb25zWzBdW1wiYVwiXTtcbiAgICAgIH1cbiAgICAgIHIuZW50cnkudXJsID0gYCR7dXJsUHJlZml4fSR7ci5lbnRyeS51cmx9JHt1cmxTdWZmaXh9YDtcbiAgICB9KTtcblxuICAgIHRoaXMucmVuZGVyKCk7XG4gIH1cblxuICBwcml2YXRlIGdldFNhbml0aXplZFJlc3VsdHMoKSB7XG4gICAgY29uc3QgcmVzdWx0cyA9IHRoaXMucmVzdWx0cztcbiAgICByZXN1bHRzLm1hcChyZXN1bHQgPT4ge1xuICAgICAgZGVsZXRlIHJlc3VsdC50aXRsZV9oaWdobGlnaHRfcmFuZ2VzO1xuICAgICAgcmVzdWx0LmV4Y2VycHRzLm1hcChleGNlcnB0ID0+IHtcbiAgICAgICAgZGVsZXRlIGV4Y2VycHQuaGlnaGxpZ2h0X3JhbmdlcztcbiAgICAgICAgZGVsZXRlIGV4Y2VycHQuaW50ZXJuYWxfYW5ub3RhdGlvbnM7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfVxuXG4gIHNldERvd25sb2FkUHJvZ3Jlc3MgPSAocGVyY2VudGFnZTogbnVtYmVyKTogdm9pZCA9PiB7XG4gICAgdGhpcy5zdGF0ZSA9IFwibG9hZGluZ1wiO1xuICAgIHRoaXMuZG93bmxvYWRQcm9ncmVzcyA9IHBlcmNlbnRhZ2U7XG4gICAgaWYgKHRoaXMuY29uZmlnLnNob3dQcm9ncmVzcykge1xuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9XG4gIH07XG5cbiAgc2V0RG93bmxvYWRFcnJvcigpOiB2b2lkIHtcbiAgICB0aGlzLnN0YXRlID0gXCJlcnJvclwiO1xuICB9XG5cbiAgcGVyZm9ybVNlYXJjaChxdWVyeTogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuc3RhdGUgIT09IFwicmVhZHlcIikge1xuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAocXVlcnkubGVuZ3RoIDw9IHRoaXMuY29uZmlnLm1pbmltdW1RdWVyeUxlbmd0aCkge1xuICAgICAgdGhpcy5yZXN1bHRzID0gW107XG4gICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYXRhID0gcmVzb2x2ZVNlYXJjaCh0aGlzLm5hbWUsIHF1ZXJ5KTtcbiAgICAgIGlmICghZGF0YSkgcmV0dXJuO1xuXG4gICAgICB0aGlzLmluamVzdFNlYXJjaERhdGEoZGF0YSk7XG5cbiAgICAgIGlmICh0aGlzLmNvbmZpZy5vblF1ZXJ5VXBkYXRlKSB7XG4gICAgICAgIHRoaXMuY29uZmlnLm9uUXVlcnlVcGRhdGUocXVlcnksIHRoaXMuZ2V0U2FuaXRpemVkUmVzdWx0cygpKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBSZXN1bHQgfSBmcm9tIFwiLi9zZWFyY2hEYXRhXCI7XG5cbmltcG9ydCB7XG4gIGNyZWF0ZSxcbiAgYWRkLFxuICBjbGVhcixcbiAgc2V0VGV4dCxcbiAgZXhpc3RzQmV5b25kQ29udGFpbmVyQm91bmRzXG59IGZyb20gXCIuL2RvbVwiO1xuaW1wb3J0IHsgRW50aXR5LCBFbnRpdHlTdGF0ZSB9IGZyb20gXCIuL2VudGl0eVwiO1xuaW1wb3J0IHsgTGlzdEl0ZW1EaXNwbGF5T3B0aW9ucywgcmVzdWx0VG9MaXN0SXRlbSB9IGZyb20gXCIuL3Jlc3VsdFRvTGlzdEl0ZW1cIjtcblxuaW50ZXJmYWNlIEVsZW1lbnRNYXAge1xuICBpbnB1dDogSFRNTElucHV0RWxlbWVudDtcbiAgb3V0cHV0OiBIVE1MRGl2RWxlbWVudDtcbiAgcHJvZ3Jlc3M6IEhUTUxFbGVtZW50O1xuICBsaXN0OiBIVE1MRWxlbWVudDtcbiAgbWVzc2FnZTogSFRNTEVsZW1lbnQ7XG4gIGF0dHJpYnV0aW9uOiBIVE1MRWxlbWVudDtcbiAgY2xvc2VCdXR0b246IEhUTUxFbGVtZW50O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlbmRlclN0YXRlIHtcbiAgcmVzdWx0czogQXJyYXk8UmVzdWx0PjtcbiAgcmVzdWx0c1Zpc2libGU6IGJvb2xlYW47XG4gIHNob3dTY29yZXM6IGJvb2xlYW47XG4gIG1lc3NhZ2U6IHN0cmluZyB8IG51bGw7XG4gIHNob3dQcm9ncmVzczogYm9vbGVhbjtcbiAgcHJvZ3Jlc3M6IG51bWJlcjtcbiAgc3RhdGU6IEVudGl0eVN0YXRlO1xufVxuXG5jb25zdCBoaWRkZW5JbnRlcmZhY2VSZW5kZXJTdGF0ZTogUmVuZGVyU3RhdGUgPSB7XG4gIHJlc3VsdHM6IFtdLFxuICByZXN1bHRzVmlzaWJsZTogZmFsc2UsXG4gIHNob3dTY29yZXM6IGZhbHNlLFxuICBtZXNzYWdlOiBudWxsLFxuICBzaG93UHJvZ3Jlc3M6IGZhbHNlLFxuICBwcm9ncmVzczogMSxcbiAgc3RhdGU6IFwicmVhZHlcIlxufTtcblxuZXhwb3J0IGNsYXNzIEVudGl0eURvbSB7XG4gIHJlYWRvbmx5IGVsZW1lbnRzOiBFbGVtZW50TWFwO1xuICByZWFkb25seSBlbnRpdHk6IEVudGl0eTtcblxuICBoaWdobGlnaHRlZFJlc3VsdD86IG51bWJlcjtcbiAgaG92ZXJTZWxlY3RFbmFibGVkOiBib29sZWFuO1xuICBsYXN0UmVuZGVyU3RhdGU6IFJlbmRlclN0YXRlO1xuXG4gIHNjcm9sbEFuY2hvclBvaW50OiBcInN0YXJ0XCIgfCBcImVuZFwiID0gXCJlbmRcIjtcblxuICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIGVudGl0eTogRW50aXR5KSB7XG4gICAgdGhpcy5lbnRpdHkgPSBlbnRpdHk7XG5cbiAgICBjb25zdCBkYXRhID0gW1xuICAgICAge1xuICAgICAgICBzZWxlY3RvcjogYGlucHV0W2RhdGEtc3Rvcms9XCIke25hbWV9XCJdYCxcbiAgICAgICAgZWxlbWVudE5hbWU6IFwiaW5wdXRcIlxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgc2VsZWN0b3I6IGBkaXZbZGF0YS1zdG9yaz1cIiR7bmFtZX0tb3V0cHV0XCJdYCxcbiAgICAgICAgZWxlbWVudE5hbWU6IFwib3V0cHV0XCJcbiAgICAgIH1cbiAgICBdO1xuXG4gICAgY29uc3QgW2lucHV0LCBvdXRwdXRdID0gZGF0YS5tYXAoZCA9PiB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihkLnNlbGVjdG9yKTtcbiAgICAgIGlmICghZWxlbWVudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYENvdWxkIG5vdCByZWdpc3RlciBzZWFyY2ggYm94IFwiJHtuYW1lfVwiOiAke2QuZWxlbWVudE5hbWV9IGVsZW1lbnQgbm90IGZvdW5kLiBNYWtlIHN1cmUgYW4gZWxlbWVudCBtYXRjaGVzIHRoZSBxdWVyeSBzZWxlY3RvciBcXGAke2Quc2VsZWN0b3J9XFxgYFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9KSBhcyBbSFRNTElucHV0RWxlbWVudCwgSFRNTERpdkVsZW1lbnRdO1xuXG4gICAgdGhpcy5lbGVtZW50cyA9IHtcbiAgICAgIGlucHV0OiBpbnB1dCxcbiAgICAgIG91dHB1dDogb3V0cHV0LFxuICAgICAgbGlzdDogY3JlYXRlKFwidWxcIiwgeyBjbGFzc05hbWVzOiBbXCJzdG9yay1yZXN1bHRzXCJdIH0pLFxuICAgICAgYXR0cmlidXRpb246IGNyZWF0ZShcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZXM6IFtcInN0b3JrLWF0dHJpYnV0aW9uXCJdXG4gICAgICB9KSxcbiAgICAgIHByb2dyZXNzOiBjcmVhdGUoXCJkaXZcIiwgeyBjbGFzc05hbWVzOiBbXCJzdG9yay1wcm9ncmVzc1wiXSB9KSxcbiAgICAgIG1lc3NhZ2U6IGNyZWF0ZShcImRpdlwiLCB7IGNsYXNzTmFtZXM6IFtcInN0b3JrLW1lc3NhZ2VcIl0gfSksXG4gICAgICBjbG9zZUJ1dHRvbjogY3JlYXRlKFwiYnV0dG9uXCIsIHtcbiAgICAgICAgY2xhc3NOYW1lczogW1wic3RvcmstY2xvc2UtYnV0dG9uXCJdXG4gICAgICB9KVxuICAgIH07XG5cbiAgICAvLyBGaXJzdCwgcmVtb3ZlIHNhdmVkIGV2ZW50IGxpc3RlbmVyIGZ1bmN0aW9ucyBmcm9tIHRoZSBlbGVtZW50LCBpZiB0aGV5IGV4aXN0LlxuICAgIC8vIFRoaXMgbWFrZXMgdGhlIEVudGl0eURvbSBjb25zdHJ1Y3RvciBzYWZlIHRvIGNhbGwgbXVsdGlwbGUgdGltZXMsIGV2ZW4gaWZcbiAgICAvLyB0aGUgZWxlbWVudHMgb24gdGhlIHBhZ2UgaGF2ZW4ndCBjaGFuZ2VkLlxuICAgIHRoaXMuZWxlbWVudHMuaW5wdXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwiaW5wdXRcIixcbiAgICAgIHRoaXMuZW50aXR5LmV2ZW50TGlzdGVuZXJGdW5jdGlvbnMuaW5wdXRJbnB1dEV2ZW50XG4gICAgKTtcblxuICAgIHRoaXMuZWxlbWVudHMuaW5wdXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwia2V5ZG93blwiLFxuICAgICAgdGhpcy5lbnRpdHkuZXZlbnRMaXN0ZW5lckZ1bmN0aW9ucy5pbnB1dEtleWRvd25FdmVudFxuICAgICk7XG5cbiAgICAvLyBUaGVuLCBzYXZlIG5ldyBldmVudCBsaXN0ZW5lciBmdW5jdGlvbnMgdG8gdGhlIGVudGl0eSBzbyB0aGF0IHdlIGNhblxuICAgIC8vIGRlbGV0ZSB0aG9zZSBsaXN0ZW5lcnMgZnJvbSB0aGUgY29ycmVzcG9uZGluZyBlbGVtZW50cyB3aGVuIHRoZVxuICAgIC8vIEVudGl0eURvbSBvYmplY3QgaXMgcmVjcmVhdGVkLlxuICAgIHRoaXMuZW50aXR5LmV2ZW50TGlzdGVuZXJGdW5jdGlvbnMgPSB7XG4gICAgICBpbnB1dElucHV0RXZlbnQ6IChlOiBJbnB1dEV2ZW50KSA9PiB7XG4gICAgICAgIHRoaXMuaGFuZGxlSW5wdXRFdmVudChlIGFzIElucHV0RXZlbnQpO1xuICAgICAgfSxcblxuICAgICAgaW5wdXRLZXlkb3duRXZlbnQ6IChlOiBLZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgICAgIHRoaXMuaGFuZGxlS2V5RG93bkV2ZW50KGUgYXMgS2V5Ym9hcmRFdmVudCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIFRoZW4sIGFkZCB0aG9zZSBuZXdseSBzYXZlZCBmdW5jdGlvbnMgYXMgZXZlbnQgbGlzdGVuZXJzIG9uIHRoZSBlbGVtZW50cy5cbiAgICB0aGlzLmVsZW1lbnRzLmlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImlucHV0XCIsXG4gICAgICB0aGlzLmVudGl0eS5ldmVudExpc3RlbmVyRnVuY3Rpb25zLmlucHV0SW5wdXRFdmVudFxuICAgICk7XG5cbiAgICB0aGlzLmVsZW1lbnRzLmlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImtleWRvd25cIixcbiAgICAgIHRoaXMuZW50aXR5LmV2ZW50TGlzdGVuZXJGdW5jdGlvbnMuaW5wdXRLZXlkb3duRXZlbnRcbiAgICApO1xuXG4gICAgLy8gV2UgZGlkbid0IGhhdmUgdG8gZG8gdGhlIHJlbW92ZS9hZGQgZGFuY2Ugd2l0aCB0aGlzIG9uZSBiZWNhdXNlXG4gICAgLy8gdGhpcyBsaXN0ZW5lciBiZWhhdmlvciBpcyBhbHJlYWR5IGlkZW1wb3RlbnQuXG4gICAgdGhpcy5lbGVtZW50cy5saXN0Py5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsICgpID0+IHtcbiAgICAgIHRoaXMuaG92ZXJTZWxlY3RFbmFibGVkID0gdHJ1ZTtcbiAgICB9KTtcblxuICAgIHRoaXMuZWxlbWVudHMuYXR0cmlidXRpb24uaW5uZXJIVE1MID1cbiAgICAgICdQb3dlcmVkIGJ5IDxhIGhyZWY9XCJodHRwczovL3N0b3JrLXNlYXJjaC5uZXRcIj5TdG9yazwvYT4nO1xuXG4gICAgc2V0VGV4dCh0aGlzLmVsZW1lbnRzLmNsb3NlQnV0dG9uLCBcIsOXXCIpO1xuXG4gICAgaWYgKHRoaXMuZW50aXR5LmNvbmZpZy5zaG93UHJvZ3Jlc3MpIHtcbiAgICAgIGFkZCh0aGlzLmVsZW1lbnRzLnByb2dyZXNzLCBcImFmdGVyZW5kXCIsIHRoaXMuZWxlbWVudHMuaW5wdXQpO1xuICAgIH1cblxuICAgIHRoaXMuZWxlbWVudHMuY2xvc2VCdXR0b24/LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmVsZW1lbnRzLmlucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgIHRoaXMuZWxlbWVudHMuaW5wdXQuZm9jdXMoKTtcbiAgICAgIHRoaXMucmVuZGVyKGhpZGRlbkludGVyZmFjZVJlbmRlclN0YXRlKTtcbiAgICAgIGNvbnN0IFttLCBuXSA9IFtcbiAgICAgICAgdGhpcy5lbnRpdHkuY29uZmlnLm9uSW5wdXRDbGVhcmVkLFxuICAgICAgICB0aGlzLmVudGl0eS5jb25maWcub25SZXN1bHRzSGlkZGVuXG4gICAgICBdO1xuICAgICAgbSA/IG0oKSA6IG51bGw7XG4gICAgICBuID8gbigpIDogbnVsbDtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgY2xlYXJEb20oKSB7XG4gICAgY2xlYXIodGhpcy5lbGVtZW50cy5vdXRwdXQpO1xuICAgIGNsZWFyKHRoaXMuZWxlbWVudHMubGlzdCk7XG4gICAgdGhpcy5lbGVtZW50cy5jbG9zZUJ1dHRvbj8ucmVtb3ZlKCk7XG4gICAgdGhpcy5lbGVtZW50cy5vdXRwdXQuY2xhc3NMaXN0LnJlbW92ZShcInN0b3JrLW91dHB1dC12aXNpYmxlXCIpO1xuICB9XG5cbiAgcmVuZGVyKHN0YXRlOiBSZW5kZXJTdGF0ZSk6IHZvaWQge1xuICAgIGNvbnN0IHF1ZXJ5ID0gKHRoaXMuZWxlbWVudHMuaW5wdXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XG4gICAgdGhpcy5jbGVhckRvbSgpO1xuICAgIHRoaXMubGFzdFJlbmRlclN0YXRlID0gc3RhdGU7XG5cbiAgICBpZiAoc3RhdGUuc2hvd1Byb2dyZXNzKSB7XG4gICAgICBjb25zdCBnZXRGYWtlUHJvZ3Jlc3MgPSAoKTogbnVtYmVyID0+IHtcbiAgICAgICAgc3dpdGNoIChzdGF0ZS5zdGF0ZSkge1xuICAgICAgICAgIGNhc2UgXCJyZWFkeVwiOlxuICAgICAgICAgIGNhc2UgXCJlcnJvclwiOlxuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgY2FzZSBcImluaXRpYWxpemVkXCI6XG4gICAgICAgICAgY2FzZSBcImxvYWRpbmdcIjpcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZS5wcm9ncmVzcyAqIDAuOSArIDAuMDU7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHByb2dyZXNzID0gZ2V0RmFrZVByb2dyZXNzKCk7XG5cbiAgICAgIGlmIChwcm9ncmVzcyA8IDEpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50cy5wcm9ncmVzcy5zdHlsZS53aWR0aCA9IGAke3Byb2dyZXNzICogMTAwfSVgO1xuICAgICAgICB0aGlzLmVsZW1lbnRzLnByb2dyZXNzLnN0eWxlLm9wYWNpdHkgPSBcIjFcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZWxlbWVudHMucHJvZ3Jlc3Muc3R5bGUud2lkdGggPSBgMTAwJWA7XG4gICAgICAgIHRoaXMuZWxlbWVudHMucHJvZ3Jlc3Muc3R5bGUub3BhY2l0eSA9IFwiMFwiO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzdGF0ZS5zdGF0ZSA9PT0gXCJlcnJvclwiKSB7XG4gICAgICB0aGlzLmVsZW1lbnRzLmlucHV0LmNsYXNzTGlzdC5hZGQoXCJzdG9yay1lcnJvclwiKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5nZXRRdWVyeSgpLmxlbmd0aCA+IDAgJiYgc3RhdGUucmVzdWx0c1Zpc2libGUpIHtcbiAgICAgIHRoaXMuZWxlbWVudHMub3V0cHV0LmNsYXNzTGlzdC5hZGQoXCJzdG9yay1vdXRwdXQtdmlzaWJsZVwiKTtcbiAgICAgIGFkZCh0aGlzLmVsZW1lbnRzLm1lc3NhZ2UsIFwiYmVmb3JlZW5kXCIsIHRoaXMuZWxlbWVudHMub3V0cHV0KTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdGUubWVzc2FnZSkge1xuICAgICAgc2V0VGV4dCh0aGlzLmVsZW1lbnRzLm1lc3NhZ2UsIHN0YXRlLm1lc3NhZ2UpO1xuICAgIH1cblxuICAgIGlmIChzdGF0ZS5yZXN1bHRzPy5sZW5ndGggPiAwICYmIHN0YXRlLnJlc3VsdHNWaXNpYmxlKSB7XG4gICAgICBhZGQodGhpcy5lbGVtZW50cy5saXN0LCBcImJlZm9yZWVuZFwiLCB0aGlzLmVsZW1lbnRzLm91dHB1dCk7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhdGUucmVzdWx0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBzdGF0ZS5yZXN1bHRzW2ldO1xuICAgICAgICBjb25zdCBnZW5lcmF0ZU9wdGlvbnM6IExpc3RJdGVtRGlzcGxheU9wdGlvbnMgPSB7XG4gICAgICAgICAgc2VsZWN0ZWQ6IGkgPT09IHRoaXMuaGlnaGxpZ2h0ZWRSZXN1bHQsXG4gICAgICAgICAgc2hvd1Njb3Jlczogc3RhdGUuc2hvd1Njb3Jlc1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGxpc3RJdGVtID0gcmVzdWx0VG9MaXN0SXRlbShyZXN1bHQsIGdlbmVyYXRlT3B0aW9ucyk7XG4gICAgICAgIGFkZChsaXN0SXRlbSBhcyBIVE1MRWxlbWVudCwgXCJiZWZvcmVlbmRcIiwgdGhpcy5lbGVtZW50cy5saXN0KTtcblxuICAgICAgICBsaXN0SXRlbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsICgpID0+IHtcbiAgICAgICAgICBpZiAodGhpcy5ob3ZlclNlbGVjdEVuYWJsZWQpIHtcbiAgICAgICAgICAgIGlmIChpICE9PSB0aGlzLmhpZ2hsaWdodGVkUmVzdWx0KSB7XG4gICAgICAgICAgICAgIHRoaXMuY2hhbmdlSGlnaGxpZ2h0ZWRSZXN1bHQoeyB0bzogaSwgc2hvdWxkU2Nyb2xsVG86IGZhbHNlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGlzdEl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4ge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB0aGlzLnNlbGVjdFJlc3VsdCgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgYWRkKHRoaXMuZWxlbWVudHMuYXR0cmlidXRpb24sIFwiYmVmb3JlZW5kXCIsIHRoaXMuZWxlbWVudHMub3V0cHV0KTtcbiAgICB9XG5cbiAgICBpZiAoKHF1ZXJ5Py5sZW5ndGggfHwgMCkgPiAwICYmIHRoaXMuZW50aXR5LmNvbmZpZy5zaG93Q2xvc2VCdXR0b24pIHtcbiAgICAgIGFkZCh0aGlzLmVsZW1lbnRzLmNsb3NlQnV0dG9uLCBcImFmdGVyZW5kXCIsIHRoaXMuZWxlbWVudHMuaW5wdXQpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2VsZWN0UmVzdWx0KCkge1xuICAgIGlmICh0aGlzLmhpZ2hsaWdodGVkUmVzdWx0ICE9IG51bGwpIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuZW50aXR5LnJlc3VsdHNbdGhpcy5oaWdobGlnaHRlZFJlc3VsdF07XG4gICAgICBpZiAodGhpcy5lbnRpdHkuY29uZmlnLm9uUmVzdWx0U2VsZWN0ZWQpIHtcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKFxuICAgICAgICAgIHRoaXMuZW50aXR5LmNvbmZpZy5vblJlc3VsdFNlbGVjdGVkKHRoaXMuZ2V0UXVlcnkoKSwgcmVzdWx0KVxuICAgICAgICApLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5hc3NpZ24ocmVzdWx0LmVudHJ5LnVybCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmFzc2lnbihyZXN1bHQuZW50cnkudXJsKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjaGFuZ2VIaWdobGlnaHRlZFJlc3VsdChvcHRpb25zOiB7XG4gICAgdG86IG51bWJlcjtcbiAgICBzaG91bGRTY3JvbGxUbzogYm9vbGVhbjtcbiAgfSk6IG51bWJlciB7XG4gICAgY29uc3QgcHJldmlvdXNWYWx1ZSA9IHRoaXMuaGlnaGxpZ2h0ZWRSZXN1bHQ7XG5cbiAgICBjb25zdCByZXNvbHZlZElkeCA9IE1hdGgubWF4KFxuICAgICAgMCxcbiAgICAgIE1hdGgubWluKHRoaXMuZW50aXR5LnJlc3VsdHMubGVuZ3RoIC0gMSwgb3B0aW9ucy50bylcbiAgICApO1xuXG4gICAgdGhpcy5oaWdobGlnaHRlZFJlc3VsdCA9IHJlc29sdmVkSWR4O1xuICAgIHRoaXMuc2Nyb2xsQW5jaG9yUG9pbnQgPVxuICAgICAgKHByZXZpb3VzVmFsdWUgfHwgMCkgPCByZXNvbHZlZElkeCA/IFwiZW5kXCIgOiBcInN0YXJ0XCI7XG5cbiAgICBsZXQgdGFyZ2V0Rm9yU2Nyb2xsVG8gPSBudWxsO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmVudGl0eS5yZXN1bHRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5lbGVtZW50cy5saXN0Py5jaGlsZHJlbltpXTtcbiAgICAgIGlmICghZWxlbWVudCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgaGlnaGxpZ2h0ZWRDbGFzc05hbWUgPSBcInNlbGVjdGVkXCI7XG5cbiAgICAgIGlmIChpID09IHJlc29sdmVkSWR4KSB7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChoaWdobGlnaHRlZENsYXNzTmFtZSk7XG4gICAgICAgIHRhcmdldEZvclNjcm9sbFRvID0gZWxlbWVudDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShoaWdobGlnaHRlZENsYXNzTmFtZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gdXNpbmcgb3B0aW9ucy5ieSBhcyBhIHByb3h5IGZvciBrZXlib2FyZCBzZWxlY3Rpb25cbiAgICBpZiAob3B0aW9ucy5zaG91bGRTY3JvbGxUbykge1xuICAgICAgdGhpcy5ob3ZlclNlbGVjdEVuYWJsZWQgPSBmYWxzZTtcbiAgICAgIGlmICh0YXJnZXRGb3JTY3JvbGxUbykge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgZXhpc3RzQmV5b25kQ29udGFpbmVyQm91bmRzKFxuICAgICAgICAgICAgdGFyZ2V0Rm9yU2Nyb2xsVG8gYXMgSFRNTEVsZW1lbnQsXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzLmxpc3RcbiAgICAgICAgICApXG4gICAgICAgICkge1xuICAgICAgICAgICh0YXJnZXRGb3JTY3JvbGxUbyBhcyBIVE1MRWxlbWVudCkuc2Nyb2xsSW50b1ZpZXcoe1xuICAgICAgICAgICAgYmVoYXZpb3I6IFwic21vb3RoXCIsXG4gICAgICAgICAgICBibG9jazogdGhpcy5zY3JvbGxBbmNob3JQb2ludCxcbiAgICAgICAgICAgIGlubGluZTogXCJuZWFyZXN0XCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXNvbHZlZElkeDtcbiAgfVxuXG4gIGhhbmRsZUtleURvd25FdmVudChldmVudDogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IFVQID0gMzg7XG4gICAgY29uc3QgRE9XTiA9IDQwO1xuICAgIGNvbnN0IFJFVFVSTiA9IDEzO1xuICAgIGNvbnN0IEVTQyA9IDI3O1xuXG4gICAgc3dpdGNoIChldmVudC5rZXlDb2RlKSB7XG4gICAgICBjYXNlIERPV046IHtcbiAgICAgICAgaWYgKHRoaXMuaGlnaGxpZ2h0ZWRSZXN1bHQgPT0gbnVsbCkge1xuICAgICAgICAgIHRoaXMuY2hhbmdlSGlnaGxpZ2h0ZWRSZXN1bHQoeyB0bzogMCwgc2hvdWxkU2Nyb2xsVG86IHRydWUgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgdGFyZ2V0ID0gTWF0aC5taW4oXG4gICAgICAgICAgICB0aGlzLmhpZ2hsaWdodGVkUmVzdWx0ICsgMSxcbiAgICAgICAgICAgIHRoaXMuZW50aXR5LnJlc3VsdHMubGVuZ3RoIC0gMVxuICAgICAgICAgICk7XG4gICAgICAgICAgdGhpcy5jaGFuZ2VIaWdobGlnaHRlZFJlc3VsdCh7IHRvOiB0YXJnZXQsIHNob3VsZFNjcm9sbFRvOiB0cnVlIH0pO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjYXNlIFVQOiB7XG4gICAgICAgIGlmICh0aGlzLmhpZ2hsaWdodGVkUmVzdWx0ICE9IG51bGwpIHtcbiAgICAgICAgICBjb25zdCB0YXJnZXQgPSBNYXRoLm1heCgwLCB0aGlzLmhpZ2hsaWdodGVkUmVzdWx0IC0gMSk7XG4gICAgICAgICAgdGhpcy5jaGFuZ2VIaWdobGlnaHRlZFJlc3VsdCh7IHRvOiB0YXJnZXQsIHNob3VsZFNjcm9sbFRvOiB0cnVlIH0pO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjYXNlIFJFVFVSTjpcbiAgICAgICAgdGhpcy5zZWxlY3RSZXN1bHQoKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgRVNDOlxuICAgICAgICBpZiAodGhpcy5sYXN0UmVuZGVyU3RhdGUucmVzdWx0c1Zpc2libGUpIHtcbiAgICAgICAgICB0aGlzLnJlbmRlcihoaWRkZW5JbnRlcmZhY2VSZW5kZXJTdGF0ZSk7XG4gICAgICAgICAgY29uc3QgbSA9IHRoaXMuZW50aXR5LmNvbmZpZy5vblJlc3VsdHNIaWRkZW47XG4gICAgICAgICAgbSA/IG0oKSA6IG51bGw7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5lbGVtZW50cy5pbnB1dC52YWx1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy5lbGVtZW50cy5pbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICAgICAgdGhpcy5yZW5kZXIoaGlkZGVuSW50ZXJmYWNlUmVuZGVyU3RhdGUpOyAvLyBUbyBjbGVhciBbeF0gYnV0dG9uXG4gICAgICAgICAgY29uc3QgbSA9IHRoaXMuZW50aXR5LmNvbmZpZy5vbklucHV0Q2xlYXJlZDtcbiAgICAgICAgICBtID8gbSgpIDogbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlSW5wdXRFdmVudChldmVudDogSW5wdXRFdmVudCk6IHZvaWQge1xuICAgIHRoaXMuZW50aXR5LnBlcmZvcm1TZWFyY2goKGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSk7XG4gIH1cblxuICBnZXRRdWVyeSgpOiBzdHJpbmcge1xuICAgIHJldHVybiAodGhpcy5lbGVtZW50cy5pbnB1dCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcbiAgfVxufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZShcbiAgbmFtZTogc3RyaW5nLFxuICBhdHRyaWJ1dGVzOiBSZWNvcmQ8c3RyaW5nLCBBcnJheTxzdHJpbmc+PlxuKTogSFRNTEVsZW1lbnQge1xuICBjb25zdCBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuYW1lKTtcbiAgaWYgKGF0dHJpYnV0ZXMuY2xhc3NOYW1lcykge1xuICAgIGVsZW0uc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgYXR0cmlidXRlcy5jbGFzc05hbWVzLmpvaW4oXCIgXCIpKTtcbiAgfVxuICByZXR1cm4gZWxlbTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZChcbiAgZWxlbTogSFRNTEVsZW1lbnQsXG4gIGxvY2F0aW9uOiBJbnNlcnRQb3NpdGlvbixcbiAgcmVmZXJlbmNlOiBIVE1MRWxlbWVudFxuKTogdm9pZCB7XG4gIHJlZmVyZW5jZS5pbnNlcnRBZGphY2VudEVsZW1lbnQobG9jYXRpb24sIGVsZW0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xlYXIoZWxlbTogSFRNTEVsZW1lbnQgfCBudWxsKTogdm9pZCB7XG4gIHdoaWxlIChlbGVtICYmIGVsZW0uZmlyc3RDaGlsZCkge1xuICAgIGVsZW0ucmVtb3ZlQ2hpbGQoZWxlbS5maXJzdENoaWxkKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0VGV4dChlbGVtOiBIVE1MRWxlbWVudCB8IG51bGwsIHRleHQ6IHN0cmluZyk6IHZvaWQge1xuICBjb25zdCB0ZXh0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRleHQpO1xuICBpZiAoZWxlbSAmJiBlbGVtLmZpcnN0Q2hpbGQpIHtcbiAgICBlbGVtLnJlcGxhY2VDaGlsZCh0ZXh0Tm9kZSwgZWxlbS5maXJzdENoaWxkKTtcbiAgfSBlbHNlIGlmIChlbGVtKSB7XG4gICAgZWxlbS5hcHBlbmRDaGlsZCh0ZXh0Tm9kZSk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4aXN0c0JleW9uZENvbnRhaW5lckJvdW5kcyhcbiAgZWxlbTogSFRNTEVsZW1lbnQsXG4gIGNvbnRhaW5lcjogSFRNTEVsZW1lbnRcbik6IGJvb2xlYW4ge1xuICBjb25zdCBlbGVtQm91bmRpbmdCb3ggPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICBjb25zdCBjb250YWluZXJCb3VuZGluZ0JveCA9IGNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICByZXR1cm4gKFxuICAgIGVsZW1Cb3VuZGluZ0JveC5ib3R0b20gPiBjb250YWluZXJCb3VuZGluZ0JveC5ib3R0b20gfHxcbiAgICBlbGVtQm91bmRpbmdCb3gudG9wIDwgY29udGFpbmVyQm91bmRpbmdCb3gudG9wXG4gICk7XG59XG4iLCJpbXBvcnQgeyBoaWdobGlnaHQgfSBmcm9tIFwiLi9wZW5jaWxcIjtcbmltcG9ydCB7IFJlc3VsdCB9IGZyb20gXCIuL3NlYXJjaERhdGFcIjtcblxuZXhwb3J0IGludGVyZmFjZSBMaXN0SXRlbURpc3BsYXlPcHRpb25zIHtcbiAgc2VsZWN0ZWQ6IGJvb2xlYW47XG4gIHNob3dTY29yZXM6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXN1bHRUb0xpc3RJdGVtKFxuICByZXN1bHQ6IFJlc3VsdCxcbiAgb3B0aW9uczogTGlzdEl0ZW1EaXNwbGF5T3B0aW9uc1xuKTogQ2hpbGROb2RlIHtcbiAgY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIik7XG4gIHRlbXBsYXRlLmlubmVySFRNTCA9IGBcbjxsaSBjbGFzcz1cInN0b3JrLXJlc3VsdCR7b3B0aW9ucy5zZWxlY3RlZCA/IFwiIHNlbGVjdGVkXCIgOiBcIlwifVwiPlxuICA8YSBocmVmPVwiJHtyZXN1bHQuZW50cnkudXJsfVwiPlxuICAgIDxkaXYgc3R5bGU9XCJkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW5cIj5cbiAgICAgIDxwIGNsYXNzPVwic3RvcmstdGl0bGVcIj4ke2hpZ2hsaWdodChcbiAgICAgICAgcmVzdWx0LmVudHJ5LnRpdGxlLFxuICAgICAgICByZXN1bHQudGl0bGVfaGlnaGxpZ2h0X3JhbmdlcyB8fCBbXVxuICAgICAgKX08L3A+XG4gICAgICAke29wdGlvbnMuc2hvd1Njb3JlcyA/IGA8Y29kZT48Yj4ke3Jlc3VsdC5zY29yZX08L2I+PC9jb2RlPmAgOiBcIlwifVxuICAgIDwvZGl2PlxuICAgICAgJHtyZXN1bHQuZXhjZXJwdHNcbiAgICAgICAgLm1hcChcbiAgICAgICAgICBlID0+IGA8ZGl2IHN0eWxlPVwiZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuXCI+PHAgY2xhc3M9XCJzdG9yay1leGNlcnB0XCI+XG4gICAgICAgIC4uLiR7aGlnaGxpZ2h0KGUudGV4dCwgZS5oaWdobGlnaHRfcmFuZ2VzIHx8IFtdKX0uLi5cbiAgICAgICAgPC9wPlxuICAgICAgICAke29wdGlvbnMuc2hvd1Njb3JlcyA/IGA8Y29kZT4ke2Uuc2NvcmV9PC9jb2RlPmAgOiBcIlwifVxuICAgICAgICA8L2Rpdj5gXG4gICAgICAgIClcbiAgICAgICAgLmpvaW4oXCJcIil9XG4gIDwvYT5cbjwvbGk+YDtcbiAgcmV0dXJuIHRlbXBsYXRlLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQgYXMgQ2hpbGROb2RlO1xufVxuIiwiLy8gSXQncyBsaWtlIEhhbmRsZWJhcnMsIGJ1dCBzbWFsbGVyLlxuXG5pbXBvcnQgeyBIaWdobGlnaHRSYW5nZSB9IGZyb20gXCIuL3NlYXJjaERhdGFcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGhpZ2hsaWdodChcbiAgdGV4dDogc3RyaW5nLFxuICBoaWdobGlnaHRfcmFuZ2VzOiBBcnJheTxIaWdobGlnaHRSYW5nZT5cbik6IHN0cmluZyB7XG4gIGZ1bmN0aW9uIGluc2VydChzdHI6IHN0cmluZywgaW5kZXg6IG51bWJlciwgdmFsdWU6IHN0cmluZykge1xuICAgIHJldHVybiBzdHIuc3Vic3RyKDAsIGluZGV4KSArIHZhbHVlICsgc3RyLnN1YnN0cihpbmRleCk7XG4gIH1cblxuICBsZXQgY2hhcmFjdGVyc0FscmVhZHlBZGRlZCA9IDA7XG5cbiAgZm9yIChjb25zdCByYW5nZSBvZiBoaWdobGlnaHRfcmFuZ2VzKSB7XG4gICAgY29uc3QgYmVnaW5uaW5nSW5zZXJ0aW9uID0gYDxtYXJrIGNsYXNzPVwic3RvcmstaGlnaGxpZ2h0XCI+YDtcbiAgICBjb25zdCBlbmRJbnNlcnRpb24gPSBgPC9tYXJrPmA7XG5cbiAgICB0ZXh0ID0gaW5zZXJ0KFxuICAgICAgdGV4dCxcbiAgICAgIHJhbmdlLmJlZ2lubmluZyArIGNoYXJhY3RlcnNBbHJlYWR5QWRkZWQsXG4gICAgICBiZWdpbm5pbmdJbnNlcnRpb25cbiAgICApO1xuICAgIGNoYXJhY3RlcnNBbHJlYWR5QWRkZWQgKz0gYmVnaW5uaW5nSW5zZXJ0aW9uLmxlbmd0aDtcblxuICAgIHRleHQgPSBpbnNlcnQodGV4dCwgcmFuZ2UuZW5kICsgY2hhcmFjdGVyc0FscmVhZHlBZGRlZCwgZW5kSW5zZXJ0aW9uKTtcbiAgICBjaGFyYWN0ZXJzQWxyZWFkeUFkZGVkICs9IGVuZEluc2VydGlvbi5sZW5ndGg7XG4gIH1cblxuICByZXR1cm4gdGV4dDtcbn1cbiIsImltcG9ydCBTdG9ya0Vycm9yIGZyb20gXCIuL3N0b3JrRXJyb3JcIjtcbmltcG9ydCB7IGRpZmZlcmVuY2UsIHBsdXJhbCB9IGZyb20gXCIuL3V0aWxcIjtcblxuZXhwb3J0IGludGVyZmFjZSBDb25maWd1cmF0aW9uIHtcbiAgc2hvd1Byb2dyZXNzOiBib29sZWFuO1xuICBwcmludEluZGV4SW5mbzogYm9vbGVhbjtcbiAgc2hvd1Njb3JlczogYm9vbGVhbjtcbiAgc2hvd0Nsb3NlQnV0dG9uOiBib29sZWFuO1xuICBtaW5pbXVtUXVlcnlMZW5ndGg6IG51bWJlcjtcbiAgZm9yY2VPdmVyd3JpdGU6IGJvb2xlYW47XG4gIG9uUXVlcnlVcGRhdGU/OiAocXVlcnk6IHN0cmluZywgcmVzdWx0czogdW5rbm93bikgPT4gdW5rbm93bjtcbiAgb25SZXN1bHRTZWxlY3RlZD86IChxdWVyeTogc3RyaW5nLCByZXN1bHQ6IHVua25vd24pID0+IHVua25vd247XG4gIG9uUmVzdWx0c0hpZGRlbj86ICgpID0+IHVua25vd247XG4gIG9uSW5wdXRDbGVhcmVkPzogKCkgPT4gdW5rbm93bjtcbn1cblxuZXhwb3J0IGNvbnN0IGRlZmF1bHRDb25maWc6IFJlYWRvbmx5PENvbmZpZ3VyYXRpb24+ID0ge1xuICBzaG93UHJvZ3Jlc3M6IHRydWUsXG4gIHByaW50SW5kZXhJbmZvOiBmYWxzZSxcbiAgc2hvd1Njb3JlczogZmFsc2UsXG4gIHNob3dDbG9zZUJ1dHRvbjogdHJ1ZSxcbiAgbWluaW11bVF1ZXJ5TGVuZ3RoOiAzLFxuICBmb3JjZU92ZXJ3cml0ZTogZmFsc2UsXG4gIG9uUXVlcnlVcGRhdGU6IHVuZGVmaW5lZCxcbiAgb25SZXN1bHRTZWxlY3RlZDogdW5kZWZpbmVkLFxuICBvblJlc3VsdHNIaWRkZW46IHVuZGVmaW5lZCxcbiAgb25JbnB1dENsZWFyZWQ6IHVuZGVmaW5lZFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZU92ZXJyaWRkZW5Db25maWcoXG4gIG92ZXJyaWRlczogUGFydGlhbDxDb25maWd1cmF0aW9uPlxuKTogQ29uZmlndXJhdGlvbiB8IFN0b3JrRXJyb3Ige1xuICBjb25zdCBjb25maWdLZXlEaWZmID0gZGlmZmVyZW5jZShcbiAgICBPYmplY3Qua2V5cyhvdmVycmlkZXMpLFxuICAgIE9iamVjdC5rZXlzKGRlZmF1bHRDb25maWcpXG4gICk7XG5cbiAgaWYgKGNvbmZpZ0tleURpZmYubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IGtleXMgPSBwbHVyYWwoY29uZmlnS2V5RGlmZi5sZW5ndGgsIFwia2V5XCIsIFwia2V5c1wiKTtcbiAgICBjb25zdCBpbnZhbGlkS2V5cyA9IEpTT04uc3RyaW5naWZ5KGNvbmZpZ0tleURpZmYpO1xuICAgIHJldHVybiBuZXcgU3RvcmtFcnJvcihgSW52YWxpZCAke2tleXN9IGluIGNvbmZpZyBvYmplY3Q6ICR7aW52YWxpZEtleXN9YCk7XG4gIH1cblxuICBjb25zdCBvdXRwdXQ6IENvbmZpZ3VyYXRpb24gPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0Q29uZmlnKTtcblxuICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhkZWZhdWx0Q29uZmlnKSBhcyBBcnJheTxrZXlvZiBDb25maWd1cmF0aW9uPikge1xuICAgIGNvbnN0IG92ZXJyaWRlVmFsID0gb3ZlcnJpZGVzW2tleV07XG4gICAgaWYgKG92ZXJyaWRlVmFsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnRcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIG91dHB1dFtrZXldID0gb3ZlcnJpZGVWYWw7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG91dHB1dDtcbn1cbiIsImV4cG9ydCBmdW5jdGlvbiBodG1sVG9FbGVtZW50KGh0bWw6IHN0cmluZyk6IENoaWxkTm9kZSB8IG51bGwge1xuICBjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcbiAgaHRtbCA9IGh0bWwudHJpbSgpOyAvLyBOZXZlciByZXR1cm4gYSB0ZXh0IG5vZGUgb2Ygd2hpdGVzcGFjZSBhcyB0aGUgcmVzdWx0XG4gIHRlbXBsYXRlLmlubmVySFRNTCA9IGh0bWw7XG4gIHJldHVybiB0ZW1wbGF0ZS5jb250ZW50LmZpcnN0Q2hpbGQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaWZmZXJlbmNlPFQ+KGFycjE6IEFycmF5PFQ+LCBhcnIyOiBBcnJheTxUPik6IEFycmF5PFQ+IHtcbiAgY29uc3Qgc2V0MSA9IG5ldyBTZXQoYXJyMSk7XG4gIGNvbnN0IHNldDIgPSBuZXcgU2V0KGFycjIpO1xuICBjb25zdCBkaWZmID0gbmV3IFNldChBcnJheS5mcm9tKHNldDEpLmZpbHRlcih4ID0+ICFzZXQyLmhhcyh4KSkpO1xuICByZXR1cm4gQXJyYXkuZnJvbShkaWZmKTtcbn1cblxuZXhwb3J0IGNvbnN0IHBsdXJhbCA9IChcbiAgY291bnQ6IG51bWJlcixcbiAgc2luZ3VsYXI6IHN0cmluZyxcbiAgcGx1cmFsOiBzdHJpbmdcbik6IHN0cmluZyA9PiAoY291bnQgPT0gMSA/IHNpbmd1bGFyIDogcGx1cmFsKTtcbiIsImludGVyZmFjZSBJbmRleExvYWRlckNhbGxiYWNrcyB7XG4gIGxvYWQ6IChyZXNwb25zZTogQXJyYXlCdWZmZXJMaWtlKSA9PiB2b2lkO1xuICBwcm9ncmVzczogKHBlcmNlbnRhZ2U6IG51bWJlcikgPT4gdm9pZDtcbiAgZXJyb3I6ICgpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2FkSW5kZXhGcm9tVXJsKFxuICB1cmw6IHN0cmluZyxcbiAgY2FsbGJhY2tzOiBJbmRleExvYWRlckNhbGxiYWNrc1xuKTogdm9pZCB7XG4gIGNvbnN0IHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICByLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGUgPT4ge1xuICAgIGNvbnN0IHsgc3RhdHVzLCByZXNwb25zZSB9ID0gZS50YXJnZXQgYXMgWE1MSHR0cFJlcXVlc3Q7XG5cbiAgICAvLyBUaGlzIHNob3VsZG4ndCBoYXBwZW4gb24gdGhlIGBsb2FkYCBldmVudCwgYnV0IGhhbmRsZSBpdCBzYWZlbHkgaWYgaXQgZG9lc1xuICAgIGlmIChzdGF0dXMgPT09IDApIHtcbiAgICAgIGNhbGxiYWNrcy5wcm9ncmVzcyhlLmxvYWRlZCAvIGUudG90YWwpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChzdGF0dXMgPCAyMDAgfHwgc3RhdHVzID4gMjk5KSB7XG4gICAgICBjYWxsYmFja3MuZXJyb3IoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjYWxsYmFja3MubG9hZChyZXNwb25zZSk7XG4gIH0pO1xuXG4gIHIuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsICgpID0+IHtcbiAgICBjYWxsYmFja3MuZXJyb3IoKTtcbiAgfSk7XG5cbiAgci5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIiwgZSA9PiB7XG4gICAgY2FsbGJhY2tzLnByb2dyZXNzKGUubG9hZGVkIC8gZS50b3RhbCk7XG4gIH0pO1xuXG4gIHIucmVzcG9uc2VUeXBlID0gXCJhcnJheWJ1ZmZlclwiO1xuICByLm9wZW4oXCJHRVRcIiwgdXJsKTtcbiAgci5zZW5kKCk7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBXYXNtUXVldWUge1xuICBxdWV1ZTogeyAoKTogdm9pZCB9W10gPSBbXTtcbiAgZmx1c2hlcyA9IDA7XG5cbiAgLyoqXG4gICAqIENhbGxlciBzaG91bGQgdXNlIHRoaXMgdG8gcXVldWUgdXAgYSBmdW5jdGlvbiB0byBiZSBydW4gb25seSB3aGVuIHRoZVxuICAgKiBXQVNNIGlzIGxvYWRlZC4gSWYgdGhlIFdBU00gaXMgYWxyZWFkeSBsb2FkZWQgd2hlbiB0aGlzIG1ldGhvZCBpcyBjYWxsZWQsXG4gICAqIHRoZSBmdW5jdGlvbiB3aWxsIHJ1biBpbW1lZGlhdGVseS5cbiAgICpcbiAgICogQHBhcmFtIGZuIEZ1bmN0aW9uIHRvIGJlIHJ1biBvbmNlIFdBU00gaXMgbG9hZGVkXG4gICAqL1xuICBydW5BZnRlcldhc21Mb2FkZWQoZm46IHsgKCk6IHZvaWQ7ICgpOiB2b2lkIH0pOiBXYXNtUXVldWUge1xuICAgIGlmICh0aGlzLmZsdXNoZXMgPiAwKSB7XG4gICAgICBmbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnF1ZXVlLnB1c2goZm4pO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFdBU00gbG9hZGVyIHNob3VsZCB1c2UgdGhpcyB0byBzaWduYWwgdG8gdGhlIHF1ZXVlIHRoYXQgdGhlIFdBU00gaGFzIGJlZW5cbiAgICogbG9hZGVkLlxuICAgKi9cbiAgcHVibGljIGZsdXNoKCk6IHZvaWQge1xuICAgIHRoaXMuZmx1c2hlcysrO1xuICAgIGZvciAoY29uc3QgZm4gb2YgdGhpcy5xdWV1ZSkge1xuICAgICAgZm4oKTtcbiAgICB9XG5cbiAgICB0aGlzLnF1ZXVlID0gW107XG4gIH1cbn1cbiIsImltcG9ydCBpbml0IGZyb20gXCJzdG9yay1zZWFyY2hcIjtcblxuY29uc3QgdmVyc2lvbiA9IG51bGw7IC8vIHByb2Nlc3MuZW52LlZFUlNJT05cbmNvbnN0IERFRkFVTFRfV0FTTV9VUkwgPSB2ZXJzaW9uXG4gID8gYGh0dHBzOi8vZmlsZXMuc3Rvcmstc2VhcmNoLm5ldC9zdG9yay0ke3ZlcnNpb259Lndhc21gXG4gIDogYGh0dHBzOi8vZmlsZXMuc3Rvcmstc2VhcmNoLm5ldC9zdG9yay53YXNtYDtcblxuZXhwb3J0IGNvbnN0IGxvYWRXYXNtID0gKG92ZXJyaWRlVXJsOiBzdHJpbmcgfCBudWxsKTogUHJvbWlzZTxzdHJpbmc+ID0+IHtcbiAgY29uc3QgdXJsID0gb3ZlcnJpZGVVcmwgfHwgREVGQVVMVF9XQVNNX1VSTDtcbiAgcmV0dXJuIGluaXQodXJsKS50aGVuKCgpID0+IHtcbiAgICAvLyBTdXBwcmVzcyB0aGUgdmFsdWUgdGhhdCBpbml0IHN1Y2NlZWRzIHdpdGguXG4gICAgcmV0dXJuIHVybDtcbiAgfSk7XG59O1xuIiwiaW1wb3J0IFN0b3JrRXJyb3IgZnJvbSBcIi4uL3N0b3JrRXJyb3JcIjtcblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRlSW5kZXhQYXJhbXMgPSAoXG4gIG5hbWU6IHN0cmluZyxcbiAgdXJsOiBzdHJpbmdcbik6IFN0b3JrRXJyb3IgfCBudWxsID0+IHtcbiAgaWYgKHR5cGVvZiBuYW1lICE9PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIG5ldyBTdG9ya0Vycm9yKFwiSW5kZXggcmVnaXN0cmF0aW9uIG5hbWUgbXVzdCBiZSBhIHN0cmluZy5cIik7XG4gIH1cblxuICBpZiAodHlwZW9mIHVybCAhPT0gXCJzdHJpbmdcIikge1xuICAgIHJldHVybiBuZXcgU3RvcmtFcnJvcihcIlVSTCBtdXN0IGJlIGEgc3RyaW5nLlwiKTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=